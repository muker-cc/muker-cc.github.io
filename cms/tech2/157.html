<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class=""> <!--<![endif]-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="renderer" content="webkit">
    <title>Spring Boot + Web Socket 实现扫码登录，这种方式太香了！！ - 技术改变生活</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
<meta name="referrer" content="never">
    <link rel="shortcut icon" href="https://www.muker.cc/assets/img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" media="screen" href="https://www.muker.cc/assets/css/bootstrap.min.css?v=1.0.97">
    <link rel="stylesheet" media="screen" href="https://www.muker.cc/assets/libs/font-awesome/css/font-awesome.min.css?v=1.0.97">
    <link rel="stylesheet" media="screen" href="https://www.muker.cc/assets/libs/fastadmin-layer/dist/theme/default/layer.css?v=1.0.97">
    <link rel="stylesheet" media="screen" href="https://www.muker.cc/assets/addons/cms/css/swiper.min.css?v=1.0.97">
    <link rel="stylesheet" media="screen" href="https://www.muker.cc/assets/addons/cms/css/share.min.css?v=1.0.97">
    <link rel="stylesheet" media="screen" href="https://www.muker.cc/assets/addons/cms/css/iconfont.css?v=1.0.97">
    <link rel="stylesheet" media="screen" href="https://www.muker.cc/assets/addons/cms/css/common.css?v=1.0.97">

    <!--[if lt IE 9]>
    <script src="/libs/html5shiv.js"></script>
    <script src="/libs/respond.min.js"></script>
    <![endif]-->

<script async="" src='https://www.muker.cc/cdn-cgi/challenge-platform/h/g/scripts/invisible.js'></script></head>
<body class="group-page">

<header class="header">
    <!-- S 导航 -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">

            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../index.html"><img src="https://www.muker.cc/uploads/20210611/12b922043e5247eeca1b833a969486c3.png" height="40" alt=""></a>
            </div>

            <div class="collapse navbar-collapse" id="navbar-collapse">
                <ul class="nav navbar-nav" data-current="34">
                    <!--如果你需要自定义NAV,可使用channellist标签来完成,这里只设置了2级,如果显示无限级,请使用cms:nav标签-->
                                        <!--判断是否有子级或高亮当前栏目-->
                    <li class="">
                        <a href="../../index.html">首页</a>
                        <ul class="dropdown-menu" role="menu">
                                                    </ul>
                    </li>
                                        <!--判断是否有子级或高亮当前栏目-->
                    <li class="">
                        <a href="../../cms2.html">新闻动态</a>
                        <ul class="dropdown-menu" role="menu">
                                                    </ul>
                    </li>
                                        <!--判断是否有子级或高亮当前栏目-->
                    <li class="">
                        <a href="javascript:window.open('https://www.clrs.me/');">博客</a>
                        <ul class="dropdown-menu" role="menu">
                                                    </ul>
                    </li>
                                        <!--判断是否有子级或高亮当前栏目-->
                    <li class="">
                        <a href="../special/hmtech.html">鸿蒙专题</a>
                        <ul class="dropdown-menu" role="menu">
                                                    </ul>
                    </li>
                                        <!--判断是否有子级或高亮当前栏目-->
                    <li class="dropdown">
                        <a href="../product.html" data-toggle="dropdown">产品中心 <b class="caret"></b></a>
                        <ul class="dropdown-menu" role="menu">
                                                        <li><a href="../p/reload.html">充值缴费</a></li>
                                                        <li><a href="../weixingongju.html">微信工具</a></li>
                                                        <li><a href="../dianshangxitong.html">电商系统</a></li>
                                                        <li><a href="../zaixianjiaoyu.html">在线教育</a></li>
                                                        <li><a href="../quanziluntan.html">圈子论坛</a></li>
                                                        <li><a href="../neirongguanlicms.html">内容管理(CMS)</a></li>
                                                        <li><a href="../yumingchushou.html">域名出售</a></li>
                                                        <li><a href="../opensource.html">开源项目</a></li>
                                                    </ul>
                    </li>
                                        <!--判断是否有子级或高亮当前栏目-->
                    <li class="dropdown">
                        <a href="#" data-toggle="dropdown">解决方案 <b class="caret"></b></a>
                        <ul class="dropdown-menu" role="menu">
                                                        <li><a href="../qiyejiejuefangan.html">企业解决方案</a></li>
                                                        <li><a href="../p/tongyongjiejuefangan.html">通用解决方案</a></li>
                                                    </ul>
                    </li>
                                        <!--判断是否有子级或高亮当前栏目-->
                    <li class="dropdown">
                        <a href="../download.html" data-toggle="dropdown">下载中心 <b class="caret"></b></a>
                        <ul class="dropdown-menu" role="menu">
                                                        <li><a href="../fuwuqi.html">服务器</a></li>
                                                        <li><a href="../caozuoxitong.html">操作系统</a></li>
                                                    </ul>
                    </li>
                    
                    <!--如果需要无限级请使用cms:nav标签-->
                    
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <form class="form-inline navbar-form" action="../s.html" method="get">
                            <div class="form-search hidden-sm hidden-md">
                                <input class="form-control" name="q" data-suggestion-url="/addons/cms/search/suggestion.html" type="text" id="searchinput" value="" placeholder="搜索">
                            </div>
                            <input type="hidden" name="__searchtoken__" value="8702e3e0a787a72a70fb68004d6173d9">                        </form>
                    </li>
                    <li class="dropdown">
                                                <a href="../../index/user/index1.html" class="dropdown-toggle" data-toggle="dropdown">会员<span class="hidden-sm">中心</span> <b class="caret"></b></a>
                                                <ul class="dropdown-menu">
                                                        <li><a href="../../index/user/login1.html"><i class="fa fa-sign-in fa-fw"></i> 登录</a></li>
                            <li><a href="../../index/user/register.html"><i class="fa fa-user-o fa-fw"></i> 注册</a></li>
                                                    </ul>
                    </li>
                </ul>
            </div>

        </div>
    </nav>
    <!-- E 导航 -->

</header>

<main class="main-content">
    

<div class="container" id="content-container">

    <div class="row">

        <main class="col-md-8">
            <div class="panel panel-default article-content">
                <div class="panel-heading">
                    <ol class="breadcrumb">
                        <!-- S 面包屑导航 -->
                                                <li><a href="../index.html">首页</a></li>
                                                <li><a href="../tech2.html">技术</a></li>
                                                <!-- E 面包屑导航 -->
                    </ol>
                </div>
                <div class="panel-body">
                    <div class="article-metas">
                        <h1 class="metas-title">Spring Boot + Web Socket 实现扫码登录，这种方式太香了！！</h1>

                        <div class="metas-body">
                                                        <span class="views-num">
                                <i class="fa fa-eye"></i> 483 阅读
                            </span>
                            <span class="comment-num">
                                <i class="fa fa-comments"></i> 0 评论
                            </span>
                            <span class="like-num">
                                <i class="fa fa-thumbs-o-up"></i>
                                <span class="js-like-num"> 0 点赞
                                </span>
                            </span>
                        </div>
                        
                    </div>

                    <div class="article-text">
                        <!-- S 正文 -->
                        <p>
                                                        <div class="rich_media_content " id="js_content" style="visibility: visible;">                                                                                                    <p style="text-align: left;line-height: 2em;margin-bottom: 5px;margin-left: 8px;margin-right: 8px;" data-mpa-powered-by="yiban.io"><strong style="max-width: 100%;font-family: 微软雅黑;font-size: 16px;text-align: left;white-space: normal;overflow-wrap: break-word !important;box-sizing: border-box !important;"></strong><strong style="max-width: 100%;font-family: 微软雅黑;font-size: 16px;text-align: left;white-space: normal;overflow-wrap: break-word !important;box-sizing: border-box !important;"><span style="max-width: 100%;font-size: 15px;overflow-wrap: break-word !important;box-sizing: border-box !important;">点击关注公众号，Java干货</span></strong><span style="color: rgb(123, 12, 0);"><strong style="max-width: 100%;font-family: 微软雅黑;font-size: 16px;text-align: left;white-space: normal;overflow-wrap: break-word !important;box-sizing: border-box !important;"><span style="color: rgb(123, 12, 0);max-width: 100%;font-size: 15px;overflow-wrap: break-word !important;box-sizing: border-box !important;">及时送达</span></strong></span><img data-ratio="1" data-src="https://mmbiz.qpic.cn/mmbiz_png/b96CibCt70iaajvl7fD4ZCicMcjhXMp1v6UibM134tIsO1j5yqHyNhh9arj090oAL7zGhRJRq6cFqFOlDZMleLl4pw/640?wx_fmt=png" data-type="png" data-w="64" style="font-family: 微软雅黑; font-size: 16px; text-align: left; white-space: normal; overflow-wrap: break-word !important; max-height: 20px !important; width: 20px !important; height: auto !important; visibility: visible !important;" _width="20px" src="https://mmbiz.qpic.cn/mmbiz_png/b96CibCt70iaajvl7fD4ZCicMcjhXMp1v6UibM134tIsO1j5yqHyNhh9arj090oAL7zGhRJRq6cFqFOlDZMleLl4pw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" crossorigin="anonymous" alt="图片" data-fail="0"></p><section><mpprofile class="js_uneditable" data-pluginname="mpprofile" data-id="MzI3ODcxMzQzMw==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/TNUwKhV0JpRmQZ5QvlZZvNdzX7ICmxzLeD6icmhocv2mrIOJEjicPL5DJ3VItG1w2RKB09zY1sl5uC6LHbuXoqjA/0?wx_fmt=png" data-nickname="Java技术栈" data-alias="javastack" data-signature="专注分享Java技术干货，包括多线程、JVM、Spring Boot、Spring Cloud、Intellij IDEA、Dubbo、Zookeeper、Redis、架构设计、微服务、消息队列、Git、面试题、程序员攻略、最新动态等。"> <!-- profile卡片 --> <div class="appmsg_card_context wx_profile_card js_wx_profile_card" data-id="MzI3ODcxMzQzMw==" data-isban="0" data-index="0">   <div class="wx_profile_card_bd">     <div class="wx_profile weui-flex">       <div class="wx_profile_hd">                  <img class="wx_profile_avatar" src="https://mmbiz.qpic.cn/mmbiz_png/TNUwKhV0JpRmQZ5QvlZZvNdzX7ICmxzLeD6icmhocv2mrIOJEjicPL5DJ3VItG1w2RKB09zY1sl5uC6LHbuXoqjA/0?wx_fmt=png" alt="Java技术栈">                </div>       <div class="wx_profile_bd weui-flex weui-flex__item">         <div class="weui-flex__item">           <strong class="wx_profile_nickname">                                Java技术栈                           </strong>           <div class="wx_profile_desc">专注分享Java技术干货，包括多线程、JVM、Spring Boot、Spring Cloud、Intellij IDEA、Dubbo、Zookeeper、Redis、架构设计、微服务、消息队列、Git、面试题、程序员攻略、最新动态等。</div>           <div class="wx_profile_tips" id="js_profile_desc">             <span class="wx_profile_tips_meta" id="js_profile_article">497篇原创内容</span>             <!-- <span class="wx_profile_tips_meta" id="js_profile_friends"></span> -->           </div>         </div>         <i class="weui-icon-arrow"></i>       </div>     </div>   </div>   <div class="wx_profile_card_ft">公众号</div> </div> </mpprofile></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="font-size: 16px;color: black;padding-right: 10px;padding-left: 10px;line-height: 1.6;letter-spacing: 0px;word-break: break-word;text-align: left;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;"><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">最近单位又有一个新Java项目。</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">涉及到扫码登录。之前项目使用的是 ajax 轮询的方式。感觉太low了。</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">所以这次用webSocket的方式进行实现</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">好。废话不多说！咱们开始！！</p><h2 data-tool="mdnice编辑器" style="font-weight: bold;font-size: 22px;line-height: 1.5em;margin-top: 2.2em;margin-bottom: 35px;"><span style="display: inline-block;background-image: linear-gradient(rgb(255, 255, 255) 60%, rgb(255, 177, 27) 40%);background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;color: rgb(81, 81, 81);padding: 2px 13px;margin-right: 3px;height: 50%;"><strong style="color: black;">一、首先咱们需要一张表</strong></span></h2><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">这表是干啥的呢？就是记录一下谁扫码了。谁登录了。</p><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(255, 177, 27);background: rgb(255, 245, 227);"><p style="font-size: 16px;line-height: 26px;color: rgb(89, 89, 89);">User_Token表</p></blockquote><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">字段如下：</p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-2"><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">uuid : 用于确保唯一性</section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">userId ：谁登录的</section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">loginTime ：登录时间</section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">createTime ：创建时间 用于判断是否过期</section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">state：是否二维码失效 &nbsp;0有效 1失效</section></li></ul><h2 data-tool="mdnice编辑器" style="font-weight: bold;font-size: 22px;line-height: 1.5em;margin-top: 2.2em;margin-bottom: 35px;"><span style="display: inline-block;background-image: linear-gradient(rgb(255, 255, 255) 60%, rgb(255, 177, 27) 40%);background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;color: rgb(81, 81, 81);padding: 2px 13px;margin-right: 3px;height: 50%;"><strong style="color: black;">二、角色都有哪些</strong></span></h2><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">咱们还需要分析一下子。扫码登录这个业务逻辑都有哪些角色</p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-2"><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">android端 or 微信Web端 ：扫码</section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">PC端 ：被扫。登录</section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">服务端：掌控全局，提供接口。</section></li></ul><h2 data-tool="mdnice编辑器" style="font-weight: bold;font-size: 22px;line-height: 1.5em;margin-top: 2.2em;margin-bottom: 35px;"><span style="display: inline-block;background-image: linear-gradient(rgb(255, 255, 255) 60%, rgb(255, 177, 27) 40%);background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;color: rgb(81, 81, 81);padding: 2px 13px;margin-right: 3px;height: 50%;"><strong style="color: black;">三、接口都需要哪些？</strong></span></h2><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">有了角色。你用大腿也能想出来接口了对不对！！</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">所以咱们的接口有2个！</p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-2"><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">生成二维码接口：生成一个二维码。二维码中有UUID。</section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">确认身份接口：确定身份以及判断是否二维码过期等</section></li></ul><h2 data-tool="mdnice编辑器" style="font-weight: bold;font-size: 22px;line-height: 1.5em;margin-top: 2.2em;margin-bottom: 35px;"><span style="display: inline-block;background-image: linear-gradient(rgb(255, 255, 255) 60%, rgb(255, 177, 27) 40%);background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;color: rgb(81, 81, 81);padding: 2px 13px;margin-right: 3px;height: 50%;"><strong style="color: black;">四、步骤</strong></span></h2><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">那句话怎么说的来着。要把大象装冰箱一共分几步？</p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-2"><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">PC端打开。调用生成二维码接口 并与 服务端建立链接。链接使用uuid进行绑定</section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">微信Web端进行扫码。获取二维码中的uuid。</section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">微信Web端拿到uuid以后。显示是否登录页面。点击确定后 调用 确认身份接口。</section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">确认身份接口通过以后。服务端给PC端发送信息。完成登录。此时链接断开。</section></li></ul><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">好了！分析完了这些。你们一定在想。。还有完没完啊。。不要在BB了。。赶紧贴代码吧。。</p><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(255, 177, 27);background: rgb(255, 245, 227);"><p style="font-size: 16px;line-height: 26px;color: rgb(89, 89, 89);">作者：观众老爷们。我这是在教给你们如何思考的方法呀?</p></blockquote><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">那么开始贴代码吧！希望大家在看到的同时也可以自己进行思考。</p><h2 data-tool="mdnice编辑器" style="font-weight: bold;font-size: 22px;line-height: 1.5em;margin-top: 2.2em;margin-bottom: 35px;"><span style="display: inline-block;background-image: linear-gradient(rgb(255, 255, 255) 60%, rgb(255, 177, 27) 40%);background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;color: rgb(81, 81, 81);padding: 2px 13px;margin-right: 3px;height: 50%;"><strong style="color: black;">五、疯狂贴代码</strong></span></h2><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247531800&amp;idx=2&amp;sn=fbf496a2626d9d550c4ae95bb4f60c11&amp;chksm=eb50f82edc2771386229a5bb81d865eee375f8ecbec665494417beb8c933260114d67b34c3a0&amp;scene=21#wechat_redirect');" textvalue="首先需要获取二维码的代码对不对！ 贴！//获取登录二维码、放入Token@RequestMapping(value&nbsp;=&nbsp;&quot;/getLoginQr&quot;&nbsp;,method&nbsp;=&nbsp;RequestMethod.GET)public&nbsp;void&nbsp;createCodeImg(HttpServletRequest&nbsp;request,&nbsp;HttpServletResponse&nbsp;response){&nbsp;&nbsp;&nbsp;&nbsp;response.setHeader(&quot;Pragma&quot;,&nbsp;&quot;No-cache&quot;);&nbsp;&nbsp;&nbsp;&nbsp;response.setHeader(&quot;Cache-Control&quot;,&nbsp;&quot;no-cache&quot;);&nbsp;&nbsp;&nbsp;&nbsp;response.setDateHeader(&quot;Expires&quot;,&nbsp;0);&nbsp;&nbsp;&nbsp;&nbsp;response.setContentType(&quot;image/jpeg&quot;);&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//这里没啥操作&nbsp;就是生成一个UUID插入&nbsp;数据库的表里&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;uuid&nbsp;=&nbsp;userService.createQrImg();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response.setHeader(&quot;uuid&quot;,&nbsp;uuid);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;这里是开源工具类&nbsp;hutool里的QrCodeUtil&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;网址：http://hutool.mydoc.io/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QrCodeUtil.generate(uuid,&nbsp;300,&nbsp;300,&nbsp;&quot;jpg&quot;,response.getOutputStream());&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;&nbsp;&nbsp;}}有了获取二维码的接口。相对的前端需要调用。" data-itemshowtype="0" tab="innerlink" style="color: rgb(0, 0, 0);" data-linktype="2"><span style="color: rgb(0, 0, 0);">首先需要获取二维码的代码对不对！贴！</span></a></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247531800&amp;idx=2&amp;sn=fbf496a2626d9d550c4ae95bb4f60c11&amp;chksm=eb50f82edc2771386229a5bb81d865eee375f8ecbec665494417beb8c933260114d67b34c3a0&amp;scene=21#wechat_redirect');" textvalue="首先需要获取二维码的代码对不对！ 贴！//获取登录二维码、放入Token@RequestMapping(value&nbsp;=&nbsp;&quot;/getLoginQr&quot;&nbsp;,method&nbsp;=&nbsp;RequestMethod.GET)public&nbsp;void&nbsp;createCodeImg(HttpServletRequest&nbsp;request,&nbsp;HttpServletResponse&nbsp;response){&nbsp;&nbsp;&nbsp;&nbsp;response.setHeader(&quot;Pragma&quot;,&nbsp;&quot;No-cache&quot;);&nbsp;&nbsp;&nbsp;&nbsp;response.setHeader(&quot;Cache-Control&quot;,&nbsp;&quot;no-cache&quot;);&nbsp;&nbsp;&nbsp;&nbsp;response.setDateHeader(&quot;Expires&quot;,&nbsp;0);&nbsp;&nbsp;&nbsp;&nbsp;response.setContentType(&quot;image/jpeg&quot;);&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//这里没啥操作&nbsp;就是生成一个UUID插入&nbsp;数据库的表里&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;uuid&nbsp;=&nbsp;userService.createQrImg();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response.setHeader(&quot;uuid&quot;,&nbsp;uuid);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;这里是开源工具类&nbsp;hutool里的QrCodeUtil&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;网址：http://hutool.mydoc.io/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QrCodeUtil.generate(uuid,&nbsp;300,&nbsp;300,&nbsp;&quot;jpg&quot;,response.getOutputStream());&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;&nbsp;&nbsp;}}有了获取二维码的接口。相对的前端需要调用。" data-itemshowtype="0" tab="innerlink" data-linktype="2"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">//获取登录二维码、放入Token<br>@RequestMapping(value&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">"/getLoginQr"</span>&nbsp;,method&nbsp;=&nbsp;RequestMethod.GET)<br>public&nbsp;void&nbsp;createCodeImg(HttpServletRequest&nbsp;request,&nbsp;HttpServletResponse&nbsp;response){<br>&nbsp;&nbsp;&nbsp;&nbsp;response.setHeader(<span style="color: #98c379;line-height: 26px;">"Pragma"</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">"No-cache"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;response.setHeader(<span style="color: #98c379;line-height: 26px;">"Cache-Control"</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">"no-cache"</span>);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;response.setDateHeader(<span style="color: #98c379;line-height: 26px;">"Expires"</span>,&nbsp;0);<br>&nbsp;&nbsp;&nbsp;&nbsp;response.setContentType(<span style="color: #98c379;line-height: 26px;">"image/jpeg"</span>);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//这里没啥操作&nbsp;就是生成一个UUID插入&nbsp;数据库的表里<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;uuid&nbsp;=&nbsp;userService.createQrImg();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response.setHeader(<span style="color: #98c379;line-height: 26px;">"uuid"</span>,&nbsp;uuid);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;这里是开源工具类&nbsp;hutool里的QrCodeUtil&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;网址：http://hutool.mydoc.io/<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QrCodeUtil.generate(uuid,&nbsp;300,&nbsp;300,&nbsp;<span style="color: #98c379;line-height: 26px;">"jpg"</span>,response.getOutputStream());<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code></a></pre><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247531800&amp;idx=2&amp;sn=fbf496a2626d9d550c4ae95bb4f60c11&amp;chksm=eb50f82edc2771386229a5bb81d865eee375f8ecbec665494417beb8c933260114d67b34c3a0&amp;scene=21#wechat_redirect');" textvalue="首先需要获取二维码的代码对不对！ 贴！//获取登录二维码、放入Token@RequestMapping(value&nbsp;=&nbsp;&quot;/getLoginQr&quot;&nbsp;,method&nbsp;=&nbsp;RequestMethod.GET)public&nbsp;void&nbsp;createCodeImg(HttpServletRequest&nbsp;request,&nbsp;HttpServletResponse&nbsp;response){&nbsp;&nbsp;&nbsp;&nbsp;response.setHeader(&quot;Pragma&quot;,&nbsp;&quot;No-cache&quot;);&nbsp;&nbsp;&nbsp;&nbsp;response.setHeader(&quot;Cache-Control&quot;,&nbsp;&quot;no-cache&quot;);&nbsp;&nbsp;&nbsp;&nbsp;response.setDateHeader(&quot;Expires&quot;,&nbsp;0);&nbsp;&nbsp;&nbsp;&nbsp;response.setContentType(&quot;image/jpeg&quot;);&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//这里没啥操作&nbsp;就是生成一个UUID插入&nbsp;数据库的表里&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;uuid&nbsp;=&nbsp;userService.createQrImg();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response.setHeader(&quot;uuid&quot;,&nbsp;uuid);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;这里是开源工具类&nbsp;hutool里的QrCodeUtil&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;网址：http://hutool.mydoc.io/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QrCodeUtil.generate(uuid,&nbsp;300,&nbsp;300,&nbsp;&quot;jpg&quot;,response.getOutputStream());&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;&nbsp;&nbsp;}}有了获取二维码的接口。相对的前端需要调用。" data-itemshowtype="0" tab="innerlink" style="color: rgb(0, 0, 0);" data-linktype="2"><span style="color: rgb(0, 0, 0);">有了获取二维码的接口。相对的前端需要调用。</span></a></p><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(255, 177, 27);background: rgb(255, 245, 227);"><p style="font-size: 16px;line-height: 26px;color: rgb(89, 89, 89);">知识点：动态加载图片流并取出header中的参数</p></blockquote><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">这里使用了xmlhttp进行处理。</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">为什么？</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">因为后端返回的是一个流。</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">那么流中。就是放置了二维码中的uuid。这个uuid作为一次会话的标识符使用。</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">那么前端也需要拿到。跟后端进行webSocket链接。</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">这样有人扫码后。服务端才可以使用webSocket的方式通知前端。有人扫码成功了。你做你的业务吧。酱紫。</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">所以为了拿到请求中 header中放置的uuid 所以这样通过xmlhttp进行处理</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">&lt;div&nbsp;class=<span style="color: #98c379;line-height: 26px;">"qrCodeImg-box"</span>&nbsp;id=<span style="color: #98c379;line-height: 26px;">"qrImgDiv"</span>&gt;&lt;/div&gt;<br></code></pre><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247531800&amp;idx=2&amp;sn=fbf496a2626d9d550c4ae95bb4f60c11&amp;chksm=eb50f82edc2771386229a5bb81d865eee375f8ecbec665494417beb8c933260114d67b34c3a0&amp;scene=21#wechat_redirect');" textvalue="js$(document).ready(function(){&nbsp;&nbsp;&nbsp;&nbsp;initQrImg();});&nbsp;&nbsp;&nbsp;function&nbsp;initQrImg(){&nbsp;&nbsp;&nbsp;&nbsp;$(&quot;#qrImgDiv&quot;).empty();&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;xmlhttp;&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp=new&nbsp;XMLHttpRequest();&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp.open(&quot;GET&quot;,getQrPath,true);&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp.responseType&nbsp;=&nbsp;&quot;blob&quot;;&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp.onload&nbsp;=&nbsp;function(){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(this);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uuid&nbsp;=&nbsp;this.getResponseHeader(&quot;uuid&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this.status&nbsp;==&nbsp;200)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;blob&nbsp;=&nbsp;this.response;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;img&nbsp;=&nbsp;document.createElement(&quot;img&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img.className&nbsp;=&nbsp;'qrCodeBox-img';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img.onload&nbsp;=&nbsp;function(e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.URL.revokeObjectURL(img.src);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img.src&nbsp;=&nbsp;window.URL.createObjectURL(blob);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.getElementById(&quot;qrImgDiv&quot;).appendChild(img);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initWebSocket();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp.send();}var&nbsp;path&nbsp;=&nbsp;&quot;://localhost:8085&quot;;var&nbsp;getQrPath&nbsp;=&nbsp;&nbsp;&quot;http&quot;&nbsp;+&nbsp;path&nbsp;+&nbsp;&quot;/user/getLoginQr&quot;;var&nbsp;wsPath&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;ws&quot;&nbsp;+&nbsp;path&nbsp;+&nbsp;&quot;/websocket/&quot;;function&nbsp;initWebSocket(){&nbsp;&nbsp;&nbsp;if(typeof(WebSocket)&nbsp;==&nbsp;&quot;undefined&quot;)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;您的浏览器不支持WebSocket&quot;);&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;您的浏览器支持WebSocket&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//实现化WebSocket对象，指定要连接的服务器地址与端口&nbsp;&nbsp;建立连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//等同于socket&nbsp;=&nbsp;new&nbsp;WebSocket(&quot;ws://localhost:8083/checkcentersys/websocket/20&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;wsPathStr&nbsp;=&nbsp;wsPath+uuid;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket&nbsp;=&nbsp;new&nbsp;WebSocket(wsPathStr);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//打开事件&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.onopen&nbsp;=&nbsp;function()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;Socket&nbsp;已打开&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//socket.send(&quot;这是来自客户端的消息&quot;&nbsp;+&nbsp;location.href&nbsp;+&nbsp;new&nbsp;Date());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//获得消息事件&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.onmessage&nbsp;=&nbsp;function(msg)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(msg.data);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;data&nbsp;=&nbsp;JSON.parse(msg.data);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(data.code&nbsp;==&nbsp;200){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(&quot;登录成功！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//这里存放自己业务需要的数据。怎么放自己看&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.sessionStorage.uuid&nbsp;=&nbsp;uuid;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.sessionStorage.userId&nbsp;=&nbsp;data.userId;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.sessionStorage.projId&nbsp;=&nbsp;data.projId;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.location.href&nbsp;=&nbsp;&quot;pages/upload.html&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//如果过期了，关闭连接、重置连接、刷新二维码&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.close();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initQrImg();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//发现消息进入&nbsp;&nbsp;&nbsp;&nbsp;开始处理前端触发逻辑&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//关闭事件&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.onclose&nbsp;=&nbsp;function()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;Socket已关闭&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//发生了错误事件&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.onerror&nbsp;=&nbsp;function()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(&quot;Socket发生了错误&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//此时可以尝试刷新页面&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;}}好了。上面已经提到了前端如何配置webSocket。" data-itemshowtype="0" tab="innerlink" data-linktype="2"><span style="color: rgb(0, 0, 0);">js</span></a></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247531800&amp;idx=2&amp;sn=fbf496a2626d9d550c4ae95bb4f60c11&amp;chksm=eb50f82edc2771386229a5bb81d865eee375f8ecbec665494417beb8c933260114d67b34c3a0&amp;scene=21#wechat_redirect');" textvalue="js$(document).ready(function(){&nbsp;&nbsp;&nbsp;&nbsp;initQrImg();});&nbsp;&nbsp;&nbsp;function&nbsp;initQrImg(){&nbsp;&nbsp;&nbsp;&nbsp;$(&quot;#qrImgDiv&quot;).empty();&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;xmlhttp;&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp=new&nbsp;XMLHttpRequest();&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp.open(&quot;GET&quot;,getQrPath,true);&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp.responseType&nbsp;=&nbsp;&quot;blob&quot;;&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp.onload&nbsp;=&nbsp;function(){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(this);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uuid&nbsp;=&nbsp;this.getResponseHeader(&quot;uuid&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this.status&nbsp;==&nbsp;200)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;blob&nbsp;=&nbsp;this.response;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;img&nbsp;=&nbsp;document.createElement(&quot;img&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img.className&nbsp;=&nbsp;'qrCodeBox-img';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img.onload&nbsp;=&nbsp;function(e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.URL.revokeObjectURL(img.src);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img.src&nbsp;=&nbsp;window.URL.createObjectURL(blob);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.getElementById(&quot;qrImgDiv&quot;).appendChild(img);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initWebSocket();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp.send();}var&nbsp;path&nbsp;=&nbsp;&quot;://localhost:8085&quot;;var&nbsp;getQrPath&nbsp;=&nbsp;&nbsp;&quot;http&quot;&nbsp;+&nbsp;path&nbsp;+&nbsp;&quot;/user/getLoginQr&quot;;var&nbsp;wsPath&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;ws&quot;&nbsp;+&nbsp;path&nbsp;+&nbsp;&quot;/websocket/&quot;;function&nbsp;initWebSocket(){&nbsp;&nbsp;&nbsp;if(typeof(WebSocket)&nbsp;==&nbsp;&quot;undefined&quot;)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;您的浏览器不支持WebSocket&quot;);&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;您的浏览器支持WebSocket&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//实现化WebSocket对象，指定要连接的服务器地址与端口&nbsp;&nbsp;建立连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//等同于socket&nbsp;=&nbsp;new&nbsp;WebSocket(&quot;ws://localhost:8083/checkcentersys/websocket/20&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;wsPathStr&nbsp;=&nbsp;wsPath+uuid;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket&nbsp;=&nbsp;new&nbsp;WebSocket(wsPathStr);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//打开事件&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.onopen&nbsp;=&nbsp;function()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;Socket&nbsp;已打开&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//socket.send(&quot;这是来自客户端的消息&quot;&nbsp;+&nbsp;location.href&nbsp;+&nbsp;new&nbsp;Date());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//获得消息事件&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.onmessage&nbsp;=&nbsp;function(msg)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(msg.data);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;data&nbsp;=&nbsp;JSON.parse(msg.data);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(data.code&nbsp;==&nbsp;200){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(&quot;登录成功！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//这里存放自己业务需要的数据。怎么放自己看&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.sessionStorage.uuid&nbsp;=&nbsp;uuid;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.sessionStorage.userId&nbsp;=&nbsp;data.userId;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.sessionStorage.projId&nbsp;=&nbsp;data.projId;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.location.href&nbsp;=&nbsp;&quot;pages/upload.html&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//如果过期了，关闭连接、重置连接、刷新二维码&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.close();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initQrImg();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//发现消息进入&nbsp;&nbsp;&nbsp;&nbsp;开始处理前端触发逻辑&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//关闭事件&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.onclose&nbsp;=&nbsp;function()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;Socket已关闭&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//发生了错误事件&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.onerror&nbsp;=&nbsp;function()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(&quot;Socket发生了错误&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//此时可以尝试刷新页面&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;}}好了。上面已经提到了前端如何配置webSocket。" data-itemshowtype="0" tab="innerlink" data-linktype="2"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">$(document).ready(<span style="color: rgb(97, 174, 238);line-height: 26px;">function</span>(){<br>&nbsp;&nbsp;&nbsp;&nbsp;initQrImg();<br>});<br>&nbsp;<br>&nbsp;<br>&nbsp;<span style="color: #c678dd;line-height: 26px;">function</span>&nbsp;<span style="color: rgb(97, 174, 238);line-height: 26px;">initQrImg</span>(){<br>&nbsp;&nbsp;&nbsp;&nbsp;$(<span style="color: #98c379;line-height: 26px;">"#qrImgDiv"</span>).empty();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;xmlhttp;<br>&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp=new&nbsp;XMLHttpRequest();<br>&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp.open(<span style="color: #98c379;line-height: 26px;">"GET"</span>,getQrPath,<span style="color: #56b6c2;line-height: 26px;">true</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp.responseType&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">"blob"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp.onload&nbsp;=&nbsp;<span style="color: rgb(97, 174, 238);line-height: 26px;">function</span>(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(this);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uuid&nbsp;=&nbsp;this.getResponseHeader(<span style="color: #98c379;line-height: 26px;">"uuid"</span>);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>&nbsp;(this.status&nbsp;==&nbsp;200)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;blob&nbsp;=&nbsp;this.response;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;img&nbsp;=&nbsp;document.createElement(<span style="color: #98c379;line-height: 26px;">"img"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img.className&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">'qrCodeBox-img'</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img.onload&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">function</span>(e)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.URL.revokeObjectURL(img.src);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img.src&nbsp;=&nbsp;window.URL.createObjectURL(blob);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.getElementById(<span style="color: #98c379;line-height: 26px;">"qrImgDiv"</span>).appendChild(img);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initWebSocket();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp.send();<br>}<br><br><br><br>var&nbsp;path&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">"://localhost:8085"</span>;<br>var&nbsp;getQrPath&nbsp;=&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">"http"</span>&nbsp;+&nbsp;path&nbsp;+&nbsp;<span style="color: #98c379;line-height: 26px;">"/user/getLoginQr"</span>;<br>var&nbsp;wsPath&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">"ws"</span>&nbsp;+&nbsp;path&nbsp;+&nbsp;<span style="color: #98c379;line-height: 26px;">"/websocket/"</span>;<br><br><br><br><span style="color: #c678dd;line-height: 26px;">function</span>&nbsp;<span style="color: rgb(97, 174, 238);line-height: 26px;">initWebSocket</span>(){<br><br>&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>(typeof(WebSocket)&nbsp;==&nbsp;<span style="color: #98c379;line-height: 26px;">"undefined"</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span style="color: #98c379;line-height: 26px;">"您的浏览器不支持WebSocket"</span>);<br>&nbsp;&nbsp;&nbsp;}<span style="color: #c678dd;line-height: 26px;">else</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span style="color: #98c379;line-height: 26px;">"您的浏览器支持WebSocket"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//实现化WebSocket对象，指定要连接的服务器地址与端口&nbsp;&nbsp;建立连接<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//等同于socket&nbsp;=&nbsp;new&nbsp;WebSocket(<span style="color: #98c379;line-height: 26px;">"ws://localhost:8083/checkcentersys/websocket/20"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;wsPathStr&nbsp;=&nbsp;wsPath+uuid;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket&nbsp;=&nbsp;new&nbsp;WebSocket(wsPathStr);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//打开事件<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.onopen&nbsp;=&nbsp;<span style="color: rgb(97, 174, 238);line-height: 26px;">function</span>()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span style="color: #98c379;line-height: 26px;">"Socket&nbsp;已打开"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//socket.send(<span style="color: #98c379;line-height: 26px;">"这是来自客户端的消息"</span>&nbsp;+&nbsp;location.href&nbsp;+&nbsp;new&nbsp;Date());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//获得消息事件<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.onmessage&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">function</span>(msg)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(msg.data);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;data&nbsp;=&nbsp;JSON.parse(msg.data);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>(data.code&nbsp;==&nbsp;200){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(<span style="color: #98c379;line-height: 26px;">"登录成功！"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//这里存放自己业务需要的数据。怎么放自己看<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.sessionStorage.uuid&nbsp;=&nbsp;uuid;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.sessionStorage.userId&nbsp;=&nbsp;data.userId;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.sessionStorage.projId&nbsp;=&nbsp;data.projId;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.location.href&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">"pages/upload.html"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<span style="color: #c678dd;line-height: 26px;">else</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//如果过期了，关闭连接、重置连接、刷新二维码<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.close();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initQrImg();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//发现消息进入&nbsp;&nbsp;&nbsp;&nbsp;开始处理前端触发逻辑<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//关闭事件<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.onclose&nbsp;=&nbsp;<span style="color: rgb(97, 174, 238);line-height: 26px;">function</span>()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span style="color: #98c379;line-height: 26px;">"Socket已关闭"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//发生了错误事件<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.onerror&nbsp;=&nbsp;<span style="color: rgb(97, 174, 238);line-height: 26px;">function</span>()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(<span style="color: #98c379;line-height: 26px;">"Socket发生了错误"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//此时可以尝试刷新页面<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;}<br><br>}<br></code></a></pre><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247531800&amp;idx=2&amp;sn=fbf496a2626d9d550c4ae95bb4f60c11&amp;chksm=eb50f82edc2771386229a5bb81d865eee375f8ecbec665494417beb8c933260114d67b34c3a0&amp;scene=21#wechat_redirect');" textvalue="js$(document).ready(function(){&nbsp;&nbsp;&nbsp;&nbsp;initQrImg();});&nbsp;&nbsp;&nbsp;function&nbsp;initQrImg(){&nbsp;&nbsp;&nbsp;&nbsp;$(&quot;#qrImgDiv&quot;).empty();&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;xmlhttp;&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp=new&nbsp;XMLHttpRequest();&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp.open(&quot;GET&quot;,getQrPath,true);&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp.responseType&nbsp;=&nbsp;&quot;blob&quot;;&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp.onload&nbsp;=&nbsp;function(){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(this);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uuid&nbsp;=&nbsp;this.getResponseHeader(&quot;uuid&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this.status&nbsp;==&nbsp;200)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;blob&nbsp;=&nbsp;this.response;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;img&nbsp;=&nbsp;document.createElement(&quot;img&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img.className&nbsp;=&nbsp;'qrCodeBox-img';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img.onload&nbsp;=&nbsp;function(e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.URL.revokeObjectURL(img.src);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img.src&nbsp;=&nbsp;window.URL.createObjectURL(blob);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.getElementById(&quot;qrImgDiv&quot;).appendChild(img);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initWebSocket();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;xmlhttp.send();}var&nbsp;path&nbsp;=&nbsp;&quot;://localhost:8085&quot;;var&nbsp;getQrPath&nbsp;=&nbsp;&nbsp;&quot;http&quot;&nbsp;+&nbsp;path&nbsp;+&nbsp;&quot;/user/getLoginQr&quot;;var&nbsp;wsPath&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;ws&quot;&nbsp;+&nbsp;path&nbsp;+&nbsp;&quot;/websocket/&quot;;function&nbsp;initWebSocket(){&nbsp;&nbsp;&nbsp;if(typeof(WebSocket)&nbsp;==&nbsp;&quot;undefined&quot;)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;您的浏览器不支持WebSocket&quot;);&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;您的浏览器支持WebSocket&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//实现化WebSocket对象，指定要连接的服务器地址与端口&nbsp;&nbsp;建立连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//等同于socket&nbsp;=&nbsp;new&nbsp;WebSocket(&quot;ws://localhost:8083/checkcentersys/websocket/20&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;wsPathStr&nbsp;=&nbsp;wsPath+uuid;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket&nbsp;=&nbsp;new&nbsp;WebSocket(wsPathStr);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//打开事件&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.onopen&nbsp;=&nbsp;function()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;Socket&nbsp;已打开&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//socket.send(&quot;这是来自客户端的消息&quot;&nbsp;+&nbsp;location.href&nbsp;+&nbsp;new&nbsp;Date());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//获得消息事件&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.onmessage&nbsp;=&nbsp;function(msg)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(msg.data);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;data&nbsp;=&nbsp;JSON.parse(msg.data);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(data.code&nbsp;==&nbsp;200){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(&quot;登录成功！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//这里存放自己业务需要的数据。怎么放自己看&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.sessionStorage.uuid&nbsp;=&nbsp;uuid;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.sessionStorage.userId&nbsp;=&nbsp;data.userId;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.sessionStorage.projId&nbsp;=&nbsp;data.projId;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.location.href&nbsp;=&nbsp;&quot;pages/upload.html&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//如果过期了，关闭连接、重置连接、刷新二维码&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.close();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initQrImg();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//发现消息进入&nbsp;&nbsp;&nbsp;&nbsp;开始处理前端触发逻辑&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//关闭事件&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.onclose&nbsp;=&nbsp;function()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;Socket已关闭&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//发生了错误事件&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.onerror&nbsp;=&nbsp;function()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(&quot;Socket发生了错误&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//此时可以尝试刷新页面&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;}}好了。上面已经提到了前端如何配置webSocket。" data-itemshowtype="0" tab="innerlink" style="color: rgb(0, 0, 0);" data-linktype="2"><span style="color: rgb(0, 0, 0);">好了。上面已经提到了前端如何配置webSocket。</span></a></p><h2 data-tool="mdnice编辑器" style="font-weight: bold;font-size: 22px;line-height: 1.5em;margin-top: 2.2em;margin-bottom: 35px;"><span style="display: inline-block;background-image: linear-gradient(rgb(255, 255, 255) 60%, rgb(255, 177, 27) 40%);background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;color: rgb(81, 81, 81);padding: 2px 13px;margin-right: 3px;height: 50%;"><strong style="color: black;">Spring Boot中操作WebSocket</strong></span></h2><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">Spring Boot 就不介绍了，基础教程和示例源码看这里：https://github.com/javastacks/spring-boot-best-practice</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">1、增加pom.xml</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">&lt;dependency&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;<br>&lt;/dependency&gt;<br></code></pre><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">2、增加一个Bean</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">/**<br>&nbsp;*&nbsp;WebSocket的支持<br>&nbsp;*&nbsp;@<span style="color: #e6c07b;line-height: 26px;">return</span><br>&nbsp;*/<br>@Bean<br>public&nbsp;ServerEndpointExporter&nbsp;<span style="color: rgb(97, 174, 238);line-height: 26px;">serverEndpointExporter</span>()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">return</span>&nbsp;new&nbsp;ServerEndpointExporter();<br>}<br></code></pre><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247531800&amp;idx=2&amp;sn=fbf496a2626d9d550c4ae95bb4f60c11&amp;chksm=eb50f82edc2771386229a5bb81d865eee375f8ecbec665494417beb8c933260114d67b34c3a0&amp;scene=21#wechat_redirect');" textvalue="3、定义WebSocketServerpackage&nbsp;com.stylefeng.guns.rest.modular.inve.websocket;&nbsp;/**&nbsp;*&nbsp;Created&nbsp;by&nbsp;jiangjiacheng&nbsp;on&nbsp;2019/6/4.&nbsp;*/import&nbsp;java.io.IOException;import&nbsp;java.util.concurrent.CopyOnWriteArraySet;&nbsp;import&nbsp;javax.websocket.OnClose;import&nbsp;javax.websocket.OnError;import&nbsp;javax.websocket.OnMessage;import&nbsp;javax.websocket.OnOpen;import&nbsp;javax.websocket.Session;import&nbsp;javax.websocket.server.PathParam;import&nbsp;javax.websocket.server.ServerEndpoint;import&nbsp;org.springframework.stereotype.Component;import&nbsp;cn.hutool.log.Log;import&nbsp;cn.hutool.log.LogFactory;&nbsp;@ServerEndpoint(&quot;/websocket/{sid}&quot;)@Componentpublic&nbsp;class&nbsp;WebSocketServer&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;Log&nbsp;log=LogFactory.get(WebSocketServer.class);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//静态变量，用来记录当前在线连接数。应该把它设计成线程安全的。&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;int&nbsp;onlineCount&nbsp;=&nbsp;0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//concurrent包的线程安全Set，用来存放每个客户端对应的MyWebSocket对象。&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;CopyOnWriteArraySet<WebSocketServer>&nbsp;webSocketSet&nbsp;=&nbsp;new&nbsp;CopyOnWriteArraySet<WebSocketServer>();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//与某个客户端的连接会话，需要通过它来给客户端发送数据&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;Session&nbsp;session;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//接收sid&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;sid=&quot;&quot;;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;连接建立成功调用的方法*/&nbsp;&nbsp;&nbsp;&nbsp;@OnOpen&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onOpen(Session&nbsp;session,@PathParam(&quot;sid&quot;)&nbsp;String&nbsp;sid)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.session&nbsp;=&nbsp;session;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;webSocketSet.add(this);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//加入set中&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addOnlineCount();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//在线数加1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(&quot;有新窗口开始监听:&quot;+sid+&quot;,当前在线人数为&quot;&nbsp;+&nbsp;getOnlineCount());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.sid=sid;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendMessage(&quot;连接成功&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(IOException&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.error(&quot;websocket&nbsp;IO异常&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}*/&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;连接关闭调用的方法&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;@OnClose&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onClose()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;webSocketSet.remove(this);&nbsp;&nbsp;//从set中删除&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subOnlineCount();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//在线数减1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(&quot;有一连接关闭！当前在线人数为&quot;&nbsp;+&nbsp;getOnlineCount());&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;收到客户端消息后调用的方法&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;message&nbsp;客户端发送过来的消息*/&nbsp;&nbsp;&nbsp;&nbsp;@OnMessage&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onMessage(String&nbsp;message,&nbsp;Session&nbsp;session)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(&quot;收到来自窗口&quot;+sid+&quot;的信息:&quot;+message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//群发消息&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(WebSocketServer&nbsp;item&nbsp;:&nbsp;webSocketSet)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.sendMessage(message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(IOException&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;session&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;error&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;@OnError&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onError(Session&nbsp;session,&nbsp;Throwable&nbsp;error)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.error(&quot;发生错误&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error.printStackTrace();&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;实现服务器主动推送&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;sendMessage(String&nbsp;message)&nbsp;throws&nbsp;IOException&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.session.getBasicRemote().sendText(message);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;群发自定义消息&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;sendInfo(String&nbsp;message,@PathParam(&quot;sid&quot;)&nbsp;String&nbsp;sid)&nbsp;throws&nbsp;IOException&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(&quot;推送消息到窗口&quot;+sid+&quot;，推送内容:&quot;+message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(WebSocketServer&nbsp;item&nbsp;:&nbsp;webSocketSet)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//这里可以设定只推送给这个sid的，为null则全部推送&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(sid&nbsp;==&nbsp;null)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.sendMessage(message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;if(item.sid.equals(sid)){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.sendMessage(message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(IOException&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;synchronized&nbsp;int&nbsp;getOnlineCount()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;onlineCount;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;synchronized&nbsp;void&nbsp;addOnlineCount()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.onlineCount++;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;synchronized&nbsp;void&nbsp;subOnlineCount()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.onlineCount--;&nbsp;&nbsp;&nbsp;&nbsp;}}这样就增加了webSocket的支持啦。" data-itemshowtype="0" tab="innerlink" style="color: rgb(0, 0, 0);" data-linktype="2"><span style="color: rgb(0, 0, 0);">3、定义WebSocketServer</span></a></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247531800&amp;idx=2&amp;sn=fbf496a2626d9d550c4ae95bb4f60c11&amp;chksm=eb50f82edc2771386229a5bb81d865eee375f8ecbec665494417beb8c933260114d67b34c3a0&amp;scene=21#wechat_redirect');" textvalue="3、定义WebSocketServerpackage&nbsp;com.stylefeng.guns.rest.modular.inve.websocket;&nbsp;/**&nbsp;*&nbsp;Created&nbsp;by&nbsp;jiangjiacheng&nbsp;on&nbsp;2019/6/4.&nbsp;*/import&nbsp;java.io.IOException;import&nbsp;java.util.concurrent.CopyOnWriteArraySet;&nbsp;import&nbsp;javax.websocket.OnClose;import&nbsp;javax.websocket.OnError;import&nbsp;javax.websocket.OnMessage;import&nbsp;javax.websocket.OnOpen;import&nbsp;javax.websocket.Session;import&nbsp;javax.websocket.server.PathParam;import&nbsp;javax.websocket.server.ServerEndpoint;import&nbsp;org.springframework.stereotype.Component;import&nbsp;cn.hutool.log.Log;import&nbsp;cn.hutool.log.LogFactory;&nbsp;@ServerEndpoint(&quot;/websocket/{sid}&quot;)@Componentpublic&nbsp;class&nbsp;WebSocketServer&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;Log&nbsp;log=LogFactory.get(WebSocketServer.class);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//静态变量，用来记录当前在线连接数。应该把它设计成线程安全的。&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;int&nbsp;onlineCount&nbsp;=&nbsp;0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//concurrent包的线程安全Set，用来存放每个客户端对应的MyWebSocket对象。&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;CopyOnWriteArraySet<WebSocketServer>&nbsp;webSocketSet&nbsp;=&nbsp;new&nbsp;CopyOnWriteArraySet<WebSocketServer>();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//与某个客户端的连接会话，需要通过它来给客户端发送数据&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;Session&nbsp;session;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//接收sid&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;sid=&quot;&quot;;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;连接建立成功调用的方法*/&nbsp;&nbsp;&nbsp;&nbsp;@OnOpen&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onOpen(Session&nbsp;session,@PathParam(&quot;sid&quot;)&nbsp;String&nbsp;sid)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.session&nbsp;=&nbsp;session;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;webSocketSet.add(this);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//加入set中&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addOnlineCount();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//在线数加1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(&quot;有新窗口开始监听:&quot;+sid+&quot;,当前在线人数为&quot;&nbsp;+&nbsp;getOnlineCount());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.sid=sid;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendMessage(&quot;连接成功&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(IOException&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.error(&quot;websocket&nbsp;IO异常&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}*/&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;连接关闭调用的方法&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;@OnClose&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onClose()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;webSocketSet.remove(this);&nbsp;&nbsp;//从set中删除&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subOnlineCount();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//在线数减1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(&quot;有一连接关闭！当前在线人数为&quot;&nbsp;+&nbsp;getOnlineCount());&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;收到客户端消息后调用的方法&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;message&nbsp;客户端发送过来的消息*/&nbsp;&nbsp;&nbsp;&nbsp;@OnMessage&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onMessage(String&nbsp;message,&nbsp;Session&nbsp;session)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(&quot;收到来自窗口&quot;+sid+&quot;的信息:&quot;+message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//群发消息&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(WebSocketServer&nbsp;item&nbsp;:&nbsp;webSocketSet)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.sendMessage(message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(IOException&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;session&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;error&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;@OnError&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onError(Session&nbsp;session,&nbsp;Throwable&nbsp;error)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.error(&quot;发生错误&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error.printStackTrace();&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;实现服务器主动推送&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;sendMessage(String&nbsp;message)&nbsp;throws&nbsp;IOException&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.session.getBasicRemote().sendText(message);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;群发自定义消息&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;sendInfo(String&nbsp;message,@PathParam(&quot;sid&quot;)&nbsp;String&nbsp;sid)&nbsp;throws&nbsp;IOException&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(&quot;推送消息到窗口&quot;+sid+&quot;，推送内容:&quot;+message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(WebSocketServer&nbsp;item&nbsp;:&nbsp;webSocketSet)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//这里可以设定只推送给这个sid的，为null则全部推送&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(sid&nbsp;==&nbsp;null)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.sendMessage(message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;if(item.sid.equals(sid)){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.sendMessage(message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(IOException&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;synchronized&nbsp;int&nbsp;getOnlineCount()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;onlineCount;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;synchronized&nbsp;void&nbsp;addOnlineCount()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.onlineCount++;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;synchronized&nbsp;void&nbsp;subOnlineCount()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.onlineCount--;&nbsp;&nbsp;&nbsp;&nbsp;}}这样就增加了webSocket的支持啦。" data-itemshowtype="0" tab="innerlink" data-linktype="2"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">package&nbsp;com.stylefeng.guns.rest.modular.inve.websocket;<br>&nbsp;<br>/**<br>&nbsp;*&nbsp;Created&nbsp;by&nbsp;jiangjiacheng&nbsp;on&nbsp;2019/6/4.<br>&nbsp;*/<br>import&nbsp;java.io.IOException;<br>import&nbsp;java.util.concurrent.CopyOnWriteArraySet;<br>&nbsp;<br>import&nbsp;javax.websocket.OnClose;<br>import&nbsp;javax.websocket.OnError;<br>import&nbsp;javax.websocket.OnMessage;<br>import&nbsp;javax.websocket.OnOpen;<br>import&nbsp;javax.websocket.Session;<br>import&nbsp;javax.websocket.server.PathParam;<br>import&nbsp;javax.websocket.server.ServerEndpoint;<br>import&nbsp;org.springframework.stereotype.Component;<br>import&nbsp;cn.hutool.log.Log;<br>import&nbsp;cn.hutool.log.LogFactory;<br>&nbsp;<br>@ServerEndpoint(<span style="color: #98c379;line-height: 26px;">"/websocket/{sid}"</span>)<br>@Component<br>public&nbsp;class&nbsp;WebSocketServer&nbsp;{<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;Log&nbsp;<span style="color: #e6c07b;line-height: 26px;">log</span>=LogFactory.get(WebSocketServer.class);<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;//静态变量，用来记录当前在线连接数。应该把它设计成线程安全的。<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;int&nbsp;onlineCount&nbsp;=&nbsp;0;<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;//concurrent包的线程安全Set，用来存放每个客户端对应的MyWebSocket对象。<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;CopyOnWriteArraySet&lt;WebSocketServer&gt;&nbsp;webSocketSet&nbsp;=&nbsp;new&nbsp;CopyOnWriteArraySet&lt;WebSocketServer&gt;();<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;//与某个客户端的连接会话，需要通过它来给客户端发送数据<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;Session&nbsp;session;<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;//接收sid<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;sid=<span style="color: #98c379;line-height: 26px;">""</span>;<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;连接建立成功调用的方法*/<br>&nbsp;&nbsp;&nbsp;&nbsp;@OnOpen<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onOpen(Session&nbsp;session,@PathParam(<span style="color: #98c379;line-height: 26px;">"sid"</span>)&nbsp;String&nbsp;sid)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.session&nbsp;=&nbsp;session;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;webSocketSet.add(this);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//加入<span style="color: #e6c07b;line-height: 26px;">set</span>中<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addOnlineCount();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//在线数加1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(<span style="color: #98c379;line-height: 26px;">"有新窗口开始监听:"</span>+sid+<span style="color: #98c379;line-height: 26px;">",当前在线人数为"</span>&nbsp;+&nbsp;getOnlineCount());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.sid=sid;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendMessage(<span style="color: #98c379;line-height: 26px;">"连接成功"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(IOException&nbsp;e)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.error(<span style="color: #98c379;line-height: 26px;">"websocket&nbsp;IO异常"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}*/<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;连接关闭调用的方法<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>&nbsp;&nbsp;&nbsp;&nbsp;@OnClose<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;<span style="color: rgb(97, 174, 238);line-height: 26px;">onClose</span>()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;webSocketSet.remove(this);&nbsp;&nbsp;//从<span style="color: #e6c07b;line-height: 26px;">set</span>中删除<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subOnlineCount();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//在线数减1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(<span style="color: #98c379;line-height: 26px;">"有一连接关闭！当前在线人数为"</span>&nbsp;+&nbsp;getOnlineCount());<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;收到客户端消息后调用的方法<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;message&nbsp;客户端发送过来的消息*/<br>&nbsp;&nbsp;&nbsp;&nbsp;@OnMessage<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onMessage(String&nbsp;message,&nbsp;Session&nbsp;session)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(<span style="color: #98c379;line-height: 26px;">"收到来自窗口"</span>+sid+<span style="color: #98c379;line-height: 26px;">"的信息:"</span>+message);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//群发消息<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">for</span>&nbsp;(WebSocketServer&nbsp;item&nbsp;:&nbsp;webSocketSet)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.sendMessage(message);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(IOException&nbsp;e)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;session<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;error<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>&nbsp;&nbsp;&nbsp;&nbsp;@OnError<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onError(Session&nbsp;session,&nbsp;Throwable&nbsp;error)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.error(<span style="color: #98c379;line-height: 26px;">"发生错误"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error.printStackTrace();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;实现服务器主动推送<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;sendMessage(String&nbsp;message)&nbsp;throws&nbsp;IOException&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.session.getBasicRemote().sendText(message);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;群发自定义消息<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;*/<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;sendInfo(String&nbsp;message,@PathParam(<span style="color: #98c379;line-height: 26px;">"sid"</span>)&nbsp;String&nbsp;sid)&nbsp;throws&nbsp;IOException&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(<span style="color: #98c379;line-height: 26px;">"推送消息到窗口"</span>+sid+<span style="color: #98c379;line-height: 26px;">"，推送内容:"</span>+message);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">for</span>&nbsp;(WebSocketServer&nbsp;item&nbsp;:&nbsp;webSocketSet)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//这里可以设定只推送给这个sid的，为null则全部推送<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>(sid&nbsp;==&nbsp;null)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.sendMessage(message);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<span style="color: #c678dd;line-height: 26px;">else</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>(item.sid.equals(sid)){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.sendMessage(message);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(IOException&nbsp;e)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">continue</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;synchronized&nbsp;int&nbsp;<span style="color: rgb(97, 174, 238);line-height: 26px;">getOnlineCount</span>()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">return</span>&nbsp;onlineCount;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;synchronized&nbsp;void&nbsp;<span style="color: rgb(97, 174, 238);line-height: 26px;">addOnlineCount</span>()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.onlineCount++;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;synchronized&nbsp;void&nbsp;<span style="color: rgb(97, 174, 238);line-height: 26px;">subOnlineCount</span>()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.onlineCount--;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code></a></pre><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247531800&amp;idx=2&amp;sn=fbf496a2626d9d550c4ae95bb4f60c11&amp;chksm=eb50f82edc2771386229a5bb81d865eee375f8ecbec665494417beb8c933260114d67b34c3a0&amp;scene=21#wechat_redirect');" textvalue="3、定义WebSocketServerpackage&nbsp;com.stylefeng.guns.rest.modular.inve.websocket;&nbsp;/**&nbsp;*&nbsp;Created&nbsp;by&nbsp;jiangjiacheng&nbsp;on&nbsp;2019/6/4.&nbsp;*/import&nbsp;java.io.IOException;import&nbsp;java.util.concurrent.CopyOnWriteArraySet;&nbsp;import&nbsp;javax.websocket.OnClose;import&nbsp;javax.websocket.OnError;import&nbsp;javax.websocket.OnMessage;import&nbsp;javax.websocket.OnOpen;import&nbsp;javax.websocket.Session;import&nbsp;javax.websocket.server.PathParam;import&nbsp;javax.websocket.server.ServerEndpoint;import&nbsp;org.springframework.stereotype.Component;import&nbsp;cn.hutool.log.Log;import&nbsp;cn.hutool.log.LogFactory;&nbsp;@ServerEndpoint(&quot;/websocket/{sid}&quot;)@Componentpublic&nbsp;class&nbsp;WebSocketServer&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;Log&nbsp;log=LogFactory.get(WebSocketServer.class);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//静态变量，用来记录当前在线连接数。应该把它设计成线程安全的。&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;int&nbsp;onlineCount&nbsp;=&nbsp;0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//concurrent包的线程安全Set，用来存放每个客户端对应的MyWebSocket对象。&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;CopyOnWriteArraySet<WebSocketServer>&nbsp;webSocketSet&nbsp;=&nbsp;new&nbsp;CopyOnWriteArraySet<WebSocketServer>();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//与某个客户端的连接会话，需要通过它来给客户端发送数据&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;Session&nbsp;session;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//接收sid&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;sid=&quot;&quot;;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;连接建立成功调用的方法*/&nbsp;&nbsp;&nbsp;&nbsp;@OnOpen&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onOpen(Session&nbsp;session,@PathParam(&quot;sid&quot;)&nbsp;String&nbsp;sid)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.session&nbsp;=&nbsp;session;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;webSocketSet.add(this);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//加入set中&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addOnlineCount();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//在线数加1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(&quot;有新窗口开始监听:&quot;+sid+&quot;,当前在线人数为&quot;&nbsp;+&nbsp;getOnlineCount());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.sid=sid;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendMessage(&quot;连接成功&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(IOException&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.error(&quot;websocket&nbsp;IO异常&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}*/&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;连接关闭调用的方法&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;@OnClose&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onClose()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;webSocketSet.remove(this);&nbsp;&nbsp;//从set中删除&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subOnlineCount();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//在线数减1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(&quot;有一连接关闭！当前在线人数为&quot;&nbsp;+&nbsp;getOnlineCount());&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;收到客户端消息后调用的方法&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;message&nbsp;客户端发送过来的消息*/&nbsp;&nbsp;&nbsp;&nbsp;@OnMessage&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onMessage(String&nbsp;message,&nbsp;Session&nbsp;session)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(&quot;收到来自窗口&quot;+sid+&quot;的信息:&quot;+message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//群发消息&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(WebSocketServer&nbsp;item&nbsp;:&nbsp;webSocketSet)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.sendMessage(message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(IOException&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;session&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;error&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;@OnError&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onError(Session&nbsp;session,&nbsp;Throwable&nbsp;error)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.error(&quot;发生错误&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error.printStackTrace();&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;实现服务器主动推送&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;sendMessage(String&nbsp;message)&nbsp;throws&nbsp;IOException&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.session.getBasicRemote().sendText(message);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;群发自定义消息&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;sendInfo(String&nbsp;message,@PathParam(&quot;sid&quot;)&nbsp;String&nbsp;sid)&nbsp;throws&nbsp;IOException&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(&quot;推送消息到窗口&quot;+sid+&quot;，推送内容:&quot;+message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(WebSocketServer&nbsp;item&nbsp;:&nbsp;webSocketSet)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//这里可以设定只推送给这个sid的，为null则全部推送&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(sid&nbsp;==&nbsp;null)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.sendMessage(message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;if(item.sid.equals(sid)){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.sendMessage(message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(IOException&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;synchronized&nbsp;int&nbsp;getOnlineCount()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;onlineCount;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;synchronized&nbsp;void&nbsp;addOnlineCount()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.onlineCount++;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;synchronized&nbsp;void&nbsp;subOnlineCount()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.onlineCount--;&nbsp;&nbsp;&nbsp;&nbsp;}}这样就增加了webSocket的支持啦。" data-itemshowtype="0" tab="innerlink" style="color: rgb(0, 0, 0);" data-linktype="2"><span style="color: rgb(0, 0, 0);">这样就增加了webSocket的支持啦。</span></a></p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">那么回到刚才的步骤。<span style="letter-spacing: 0px;">另外，</span><span style="letter-spacing: 0px;">《 </span><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247531800&amp;idx=2&amp;sn=fbf496a2626d9d550c4ae95bb4f60c11&amp;chksm=eb50f82edc2771386229a5bb81d865eee375f8ecbec665494417beb8c933260114d67b34c3a0&amp;scene=21#wechat_redirect');" data-itemshowtype="0" tab="innerlink" style="letter-spacing: 0px;color: rgb(0, 0, 0);" data-linktype="2"><em>Spring Boot 学习笔记</em></a><span style="letter-spacing: 0px;">》建议看下。</span></p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">1、首先PC端调用接口展示出来了二维码。</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">2、请求二维码中的http请求。就有uuid在 header中。直接取到uuid 作为webSocket的标识sid进行连接。</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">3、然后手机端使用相机拿到二维码中的uuid。使用uuid + userid 请求 扫码成功接口。</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">贴扫码成功接口</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247531800&amp;idx=2&amp;sn=fbf496a2626d9d550c4ae95bb4f60c11&amp;chksm=eb50f82edc2771386229a5bb81d865eee375f8ecbec665494417beb8c933260114d67b34c3a0&amp;scene=21#wechat_redirect');" textvalue="Controller代码：/**&nbsp;*&nbsp;确认身份接口：确定身份以及判断是否二维码过期等&nbsp;*&nbsp;@param&nbsp;token&nbsp;*&nbsp;@param&nbsp;userId&nbsp;*&nbsp;@return&nbsp;*/@RequestMapping(value&nbsp;=&nbsp;&quot;/bindUserIdAndToken&quot;&nbsp;,method&nbsp;=&nbsp;RequestMethod.GET)@ResponseBodypublic&nbsp;Object&nbsp;bindUserIdAndToken(@RequestParam(&quot;token&quot;)&nbsp;String&nbsp;token&nbsp;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@RequestParam(&quot;userId&quot;)&nbsp;Integer&nbsp;userId,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@RequestParam(required&nbsp;=&nbsp;false,value&nbsp;=&nbsp;&quot;projId&quot;)&nbsp;Integer&nbsp;projId){&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;SuccessTip(userService.bindUserIdAndToken(userId,token,projId));&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;ErrorTip(500,e.getMessage());&nbsp;&nbsp;&nbsp;&nbsp;}}Service代码@Overridepublic&nbsp;String&nbsp;bindUserIdAndToken(Integer&nbsp;userId,&nbsp;String&nbsp;token,Integer&nbsp;projId)&nbsp;throws&nbsp;Exception&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;QrLoginToken&nbsp;qrLoginToken&nbsp;=&nbsp;new&nbsp;QrLoginToken();&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setToken(token);&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken&nbsp;=&nbsp;qrLoginTokenMapper.selectOne(qrLoginToken);&nbsp;&nbsp;&nbsp;&nbsp;if(null&nbsp;==&nbsp;qrLoginToken){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(&quot;错误的请求！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;createDate&nbsp;=&nbsp;new&nbsp;Date(qrLoginToken.getCreateTime().getTime()&nbsp;+&nbsp;(1000&nbsp;*&nbsp;60&nbsp;*&nbsp;Constant.LOGIN_VALIDATION_TIME));&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;nowDate&nbsp;=&nbsp;new&nbsp;Date();&nbsp;&nbsp;&nbsp;&nbsp;if(nowDate.getTime()&nbsp;>&nbsp;createDate.getTime()){//当前时间大于校验时间&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JSONObject&nbsp;jsonObject&nbsp;=&nbsp;new&nbsp;JSONObject();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;code&quot;,500);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;msg&quot;,&quot;二维码失效！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.sendInfo(jsonObject.toJSONString(),token);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(&quot;二维码失效！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setLoginTime(new&nbsp;Date());&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setUserId(userId);&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;i&nbsp;=&nbsp;qrLoginTokenMapper.updateById(qrLoginToken);&nbsp;&nbsp;&nbsp;&nbsp;JSONObject&nbsp;jsonObject&nbsp;=&nbsp;new&nbsp;JSONObject();&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;code&quot;,200);&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;msg&quot;,&quot;ok&quot;);&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;userId&quot;,userId);&nbsp;&nbsp;&nbsp;&nbsp;if(ToolUtil.isNotEmpty(projId)){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;projId&quot;,projId);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.sendInfo(jsonObject.toJSONString(),token);&nbsp;&nbsp;&nbsp;&nbsp;if(i&nbsp;>&nbsp;0&nbsp;){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;null;&nbsp;&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(&quot;服务器异常！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;}}逻辑大概就是判断一下 token对不对" data-itemshowtype="0" tab="innerlink" style="color: rgb(0, 0, 0);" data-linktype="2"><span style="color: rgb(0, 0, 0);">Controller代码：</span></a></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247531800&amp;idx=2&amp;sn=fbf496a2626d9d550c4ae95bb4f60c11&amp;chksm=eb50f82edc2771386229a5bb81d865eee375f8ecbec665494417beb8c933260114d67b34c3a0&amp;scene=21#wechat_redirect');" textvalue="Controller代码：/**&nbsp;*&nbsp;确认身份接口：确定身份以及判断是否二维码过期等&nbsp;*&nbsp;@param&nbsp;token&nbsp;*&nbsp;@param&nbsp;userId&nbsp;*&nbsp;@return&nbsp;*/@RequestMapping(value&nbsp;=&nbsp;&quot;/bindUserIdAndToken&quot;&nbsp;,method&nbsp;=&nbsp;RequestMethod.GET)@ResponseBodypublic&nbsp;Object&nbsp;bindUserIdAndToken(@RequestParam(&quot;token&quot;)&nbsp;String&nbsp;token&nbsp;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@RequestParam(&quot;userId&quot;)&nbsp;Integer&nbsp;userId,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@RequestParam(required&nbsp;=&nbsp;false,value&nbsp;=&nbsp;&quot;projId&quot;)&nbsp;Integer&nbsp;projId){&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;SuccessTip(userService.bindUserIdAndToken(userId,token,projId));&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;ErrorTip(500,e.getMessage());&nbsp;&nbsp;&nbsp;&nbsp;}}Service代码@Overridepublic&nbsp;String&nbsp;bindUserIdAndToken(Integer&nbsp;userId,&nbsp;String&nbsp;token,Integer&nbsp;projId)&nbsp;throws&nbsp;Exception&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;QrLoginToken&nbsp;qrLoginToken&nbsp;=&nbsp;new&nbsp;QrLoginToken();&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setToken(token);&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken&nbsp;=&nbsp;qrLoginTokenMapper.selectOne(qrLoginToken);&nbsp;&nbsp;&nbsp;&nbsp;if(null&nbsp;==&nbsp;qrLoginToken){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(&quot;错误的请求！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;createDate&nbsp;=&nbsp;new&nbsp;Date(qrLoginToken.getCreateTime().getTime()&nbsp;+&nbsp;(1000&nbsp;*&nbsp;60&nbsp;*&nbsp;Constant.LOGIN_VALIDATION_TIME));&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;nowDate&nbsp;=&nbsp;new&nbsp;Date();&nbsp;&nbsp;&nbsp;&nbsp;if(nowDate.getTime()&nbsp;>&nbsp;createDate.getTime()){//当前时间大于校验时间&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JSONObject&nbsp;jsonObject&nbsp;=&nbsp;new&nbsp;JSONObject();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;code&quot;,500);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;msg&quot;,&quot;二维码失效！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.sendInfo(jsonObject.toJSONString(),token);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(&quot;二维码失效！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setLoginTime(new&nbsp;Date());&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setUserId(userId);&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;i&nbsp;=&nbsp;qrLoginTokenMapper.updateById(qrLoginToken);&nbsp;&nbsp;&nbsp;&nbsp;JSONObject&nbsp;jsonObject&nbsp;=&nbsp;new&nbsp;JSONObject();&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;code&quot;,200);&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;msg&quot;,&quot;ok&quot;);&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;userId&quot;,userId);&nbsp;&nbsp;&nbsp;&nbsp;if(ToolUtil.isNotEmpty(projId)){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;projId&quot;,projId);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.sendInfo(jsonObject.toJSONString(),token);&nbsp;&nbsp;&nbsp;&nbsp;if(i&nbsp;>&nbsp;0&nbsp;){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;null;&nbsp;&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(&quot;服务器异常！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;}}逻辑大概就是判断一下 token对不对" data-itemshowtype="0" tab="innerlink" data-linktype="2"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">/**<br>&nbsp;*&nbsp;确认身份接口：确定身份以及判断是否二维码过期等<br>&nbsp;*&nbsp;@param&nbsp;token<br>&nbsp;*&nbsp;@param&nbsp;userId<br>&nbsp;*&nbsp;@<span style="color: #e6c07b;line-height: 26px;">return</span><br>&nbsp;*/<br>@RequestMapping(value&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">"/bindUserIdAndToken"</span>&nbsp;,method&nbsp;=&nbsp;RequestMethod.GET)<br>@ResponseBody<br>public&nbsp;Object&nbsp;bindUserIdAndToken(@RequestParam(<span style="color: #98c379;line-height: 26px;">"token"</span>)&nbsp;String&nbsp;token&nbsp;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@RequestParam(<span style="color: #98c379;line-height: 26px;">"userId"</span>)&nbsp;Integer&nbsp;userId,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@RequestParam(required&nbsp;=&nbsp;<span style="color: #56b6c2;line-height: 26px;">false</span>,value&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">"projId"</span>)&nbsp;Integer&nbsp;projId){<br><br>&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">return</span>&nbsp;new&nbsp;SuccessTip(userService.bindUserIdAndToken(userId,token,projId));<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">return</span>&nbsp;new&nbsp;ErrorTip(500,e.getMessage());<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>}<br></code></a></pre><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247531800&amp;idx=2&amp;sn=fbf496a2626d9d550c4ae95bb4f60c11&amp;chksm=eb50f82edc2771386229a5bb81d865eee375f8ecbec665494417beb8c933260114d67b34c3a0&amp;scene=21#wechat_redirect');" textvalue="Controller代码：/**&nbsp;*&nbsp;确认身份接口：确定身份以及判断是否二维码过期等&nbsp;*&nbsp;@param&nbsp;token&nbsp;*&nbsp;@param&nbsp;userId&nbsp;*&nbsp;@return&nbsp;*/@RequestMapping(value&nbsp;=&nbsp;&quot;/bindUserIdAndToken&quot;&nbsp;,method&nbsp;=&nbsp;RequestMethod.GET)@ResponseBodypublic&nbsp;Object&nbsp;bindUserIdAndToken(@RequestParam(&quot;token&quot;)&nbsp;String&nbsp;token&nbsp;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@RequestParam(&quot;userId&quot;)&nbsp;Integer&nbsp;userId,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@RequestParam(required&nbsp;=&nbsp;false,value&nbsp;=&nbsp;&quot;projId&quot;)&nbsp;Integer&nbsp;projId){&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;SuccessTip(userService.bindUserIdAndToken(userId,token,projId));&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;ErrorTip(500,e.getMessage());&nbsp;&nbsp;&nbsp;&nbsp;}}Service代码@Overridepublic&nbsp;String&nbsp;bindUserIdAndToken(Integer&nbsp;userId,&nbsp;String&nbsp;token,Integer&nbsp;projId)&nbsp;throws&nbsp;Exception&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;QrLoginToken&nbsp;qrLoginToken&nbsp;=&nbsp;new&nbsp;QrLoginToken();&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setToken(token);&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken&nbsp;=&nbsp;qrLoginTokenMapper.selectOne(qrLoginToken);&nbsp;&nbsp;&nbsp;&nbsp;if(null&nbsp;==&nbsp;qrLoginToken){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(&quot;错误的请求！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;createDate&nbsp;=&nbsp;new&nbsp;Date(qrLoginToken.getCreateTime().getTime()&nbsp;+&nbsp;(1000&nbsp;*&nbsp;60&nbsp;*&nbsp;Constant.LOGIN_VALIDATION_TIME));&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;nowDate&nbsp;=&nbsp;new&nbsp;Date();&nbsp;&nbsp;&nbsp;&nbsp;if(nowDate.getTime()&nbsp;>&nbsp;createDate.getTime()){//当前时间大于校验时间&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JSONObject&nbsp;jsonObject&nbsp;=&nbsp;new&nbsp;JSONObject();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;code&quot;,500);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;msg&quot;,&quot;二维码失效！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.sendInfo(jsonObject.toJSONString(),token);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(&quot;二维码失效！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setLoginTime(new&nbsp;Date());&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setUserId(userId);&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;i&nbsp;=&nbsp;qrLoginTokenMapper.updateById(qrLoginToken);&nbsp;&nbsp;&nbsp;&nbsp;JSONObject&nbsp;jsonObject&nbsp;=&nbsp;new&nbsp;JSONObject();&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;code&quot;,200);&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;msg&quot;,&quot;ok&quot;);&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;userId&quot;,userId);&nbsp;&nbsp;&nbsp;&nbsp;if(ToolUtil.isNotEmpty(projId)){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;projId&quot;,projId);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.sendInfo(jsonObject.toJSONString(),token);&nbsp;&nbsp;&nbsp;&nbsp;if(i&nbsp;>&nbsp;0&nbsp;){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;null;&nbsp;&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(&quot;服务器异常！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;}}逻辑大概就是判断一下 token对不对" data-itemshowtype="0" tab="innerlink" style="color: rgb(0, 0, 0);" data-linktype="2"><span style="color: rgb(0, 0, 0);">Service代码</span></a></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247531800&amp;idx=2&amp;sn=fbf496a2626d9d550c4ae95bb4f60c11&amp;chksm=eb50f82edc2771386229a5bb81d865eee375f8ecbec665494417beb8c933260114d67b34c3a0&amp;scene=21#wechat_redirect');" textvalue="Controller代码：/**&nbsp;*&nbsp;确认身份接口：确定身份以及判断是否二维码过期等&nbsp;*&nbsp;@param&nbsp;token&nbsp;*&nbsp;@param&nbsp;userId&nbsp;*&nbsp;@return&nbsp;*/@RequestMapping(value&nbsp;=&nbsp;&quot;/bindUserIdAndToken&quot;&nbsp;,method&nbsp;=&nbsp;RequestMethod.GET)@ResponseBodypublic&nbsp;Object&nbsp;bindUserIdAndToken(@RequestParam(&quot;token&quot;)&nbsp;String&nbsp;token&nbsp;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@RequestParam(&quot;userId&quot;)&nbsp;Integer&nbsp;userId,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@RequestParam(required&nbsp;=&nbsp;false,value&nbsp;=&nbsp;&quot;projId&quot;)&nbsp;Integer&nbsp;projId){&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;SuccessTip(userService.bindUserIdAndToken(userId,token,projId));&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;ErrorTip(500,e.getMessage());&nbsp;&nbsp;&nbsp;&nbsp;}}Service代码@Overridepublic&nbsp;String&nbsp;bindUserIdAndToken(Integer&nbsp;userId,&nbsp;String&nbsp;token,Integer&nbsp;projId)&nbsp;throws&nbsp;Exception&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;QrLoginToken&nbsp;qrLoginToken&nbsp;=&nbsp;new&nbsp;QrLoginToken();&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setToken(token);&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken&nbsp;=&nbsp;qrLoginTokenMapper.selectOne(qrLoginToken);&nbsp;&nbsp;&nbsp;&nbsp;if(null&nbsp;==&nbsp;qrLoginToken){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(&quot;错误的请求！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;createDate&nbsp;=&nbsp;new&nbsp;Date(qrLoginToken.getCreateTime().getTime()&nbsp;+&nbsp;(1000&nbsp;*&nbsp;60&nbsp;*&nbsp;Constant.LOGIN_VALIDATION_TIME));&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;nowDate&nbsp;=&nbsp;new&nbsp;Date();&nbsp;&nbsp;&nbsp;&nbsp;if(nowDate.getTime()&nbsp;>&nbsp;createDate.getTime()){//当前时间大于校验时间&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JSONObject&nbsp;jsonObject&nbsp;=&nbsp;new&nbsp;JSONObject();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;code&quot;,500);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;msg&quot;,&quot;二维码失效！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.sendInfo(jsonObject.toJSONString(),token);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(&quot;二维码失效！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setLoginTime(new&nbsp;Date());&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setUserId(userId);&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;i&nbsp;=&nbsp;qrLoginTokenMapper.updateById(qrLoginToken);&nbsp;&nbsp;&nbsp;&nbsp;JSONObject&nbsp;jsonObject&nbsp;=&nbsp;new&nbsp;JSONObject();&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;code&quot;,200);&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;msg&quot;,&quot;ok&quot;);&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;userId&quot;,userId);&nbsp;&nbsp;&nbsp;&nbsp;if(ToolUtil.isNotEmpty(projId)){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;projId&quot;,projId);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.sendInfo(jsonObject.toJSONString(),token);&nbsp;&nbsp;&nbsp;&nbsp;if(i&nbsp;>&nbsp;0&nbsp;){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;null;&nbsp;&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(&quot;服务器异常！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;}}逻辑大概就是判断一下 token对不对" data-itemshowtype="0" tab="innerlink" data-linktype="2"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">@Override<br>public&nbsp;String&nbsp;bindUserIdAndToken(Integer&nbsp;userId,&nbsp;String&nbsp;token,Integer&nbsp;projId)&nbsp;throws&nbsp;Exception&nbsp;{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;QrLoginToken&nbsp;qrLoginToken&nbsp;=&nbsp;new&nbsp;QrLoginToken();<br>&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setToken(token);<br>&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken&nbsp;=&nbsp;qrLoginTokenMapper.selectOne(qrLoginToken);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>(null&nbsp;==&nbsp;qrLoginToken){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(<span style="color: #98c379;line-height: 26px;">"错误的请求！"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;createDate&nbsp;=&nbsp;new&nbsp;Date(qrLoginToken.getCreateTime().getTime()&nbsp;+&nbsp;(1000&nbsp;*&nbsp;60&nbsp;*&nbsp;Constant.LOGIN_VALIDATION_TIME));<br>&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;nowDate&nbsp;=&nbsp;new&nbsp;Date();<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>(nowDate.getTime()&nbsp;&gt;&nbsp;createDate.getTime()){//当前时间大于校验时间<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JSONObject&nbsp;jsonObject&nbsp;=&nbsp;new&nbsp;JSONObject();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(<span style="color: #98c379;line-height: 26px;">"code"</span>,500);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(<span style="color: #98c379;line-height: 26px;">"msg"</span>,<span style="color: #98c379;line-height: 26px;">"二维码失效！"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.sendInfo(jsonObject.toJSONString(),token);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(<span style="color: #98c379;line-height: 26px;">"二维码失效！"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setLoginTime(new&nbsp;Date());<br>&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setUserId(userId);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;i&nbsp;=&nbsp;qrLoginTokenMapper.updateById(qrLoginToken);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;JSONObject&nbsp;jsonObject&nbsp;=&nbsp;new&nbsp;JSONObject();<br>&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(<span style="color: #98c379;line-height: 26px;">"code"</span>,200);<br>&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(<span style="color: #98c379;line-height: 26px;">"msg"</span>,<span style="color: #98c379;line-height: 26px;">"ok"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(<span style="color: #98c379;line-height: 26px;">"userId"</span>,userId);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>(ToolUtil.isNotEmpty(projId)){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(<span style="color: #98c379;line-height: 26px;">"projId"</span>,projId);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.sendInfo(jsonObject.toJSONString(),token);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>(i&nbsp;&gt;&nbsp;0&nbsp;){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">return</span>&nbsp;null;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<span style="color: #c678dd;line-height: 26px;">else</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(<span style="color: #98c379;line-height: 26px;">"服务器异常！"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code></a></pre><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247531800&amp;idx=2&amp;sn=fbf496a2626d9d550c4ae95bb4f60c11&amp;chksm=eb50f82edc2771386229a5bb81d865eee375f8ecbec665494417beb8c933260114d67b34c3a0&amp;scene=21#wechat_redirect');" textvalue="Controller代码：/**&nbsp;*&nbsp;确认身份接口：确定身份以及判断是否二维码过期等&nbsp;*&nbsp;@param&nbsp;token&nbsp;*&nbsp;@param&nbsp;userId&nbsp;*&nbsp;@return&nbsp;*/@RequestMapping(value&nbsp;=&nbsp;&quot;/bindUserIdAndToken&quot;&nbsp;,method&nbsp;=&nbsp;RequestMethod.GET)@ResponseBodypublic&nbsp;Object&nbsp;bindUserIdAndToken(@RequestParam(&quot;token&quot;)&nbsp;String&nbsp;token&nbsp;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@RequestParam(&quot;userId&quot;)&nbsp;Integer&nbsp;userId,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@RequestParam(required&nbsp;=&nbsp;false,value&nbsp;=&nbsp;&quot;projId&quot;)&nbsp;Integer&nbsp;projId){&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;SuccessTip(userService.bindUserIdAndToken(userId,token,projId));&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;ErrorTip(500,e.getMessage());&nbsp;&nbsp;&nbsp;&nbsp;}}Service代码@Overridepublic&nbsp;String&nbsp;bindUserIdAndToken(Integer&nbsp;userId,&nbsp;String&nbsp;token,Integer&nbsp;projId)&nbsp;throws&nbsp;Exception&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;QrLoginToken&nbsp;qrLoginToken&nbsp;=&nbsp;new&nbsp;QrLoginToken();&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setToken(token);&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken&nbsp;=&nbsp;qrLoginTokenMapper.selectOne(qrLoginToken);&nbsp;&nbsp;&nbsp;&nbsp;if(null&nbsp;==&nbsp;qrLoginToken){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(&quot;错误的请求！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;createDate&nbsp;=&nbsp;new&nbsp;Date(qrLoginToken.getCreateTime().getTime()&nbsp;+&nbsp;(1000&nbsp;*&nbsp;60&nbsp;*&nbsp;Constant.LOGIN_VALIDATION_TIME));&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;nowDate&nbsp;=&nbsp;new&nbsp;Date();&nbsp;&nbsp;&nbsp;&nbsp;if(nowDate.getTime()&nbsp;>&nbsp;createDate.getTime()){//当前时间大于校验时间&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JSONObject&nbsp;jsonObject&nbsp;=&nbsp;new&nbsp;JSONObject();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;code&quot;,500);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;msg&quot;,&quot;二维码失效！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.sendInfo(jsonObject.toJSONString(),token);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(&quot;二维码失效！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setLoginTime(new&nbsp;Date());&nbsp;&nbsp;&nbsp;&nbsp;qrLoginToken.setUserId(userId);&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;i&nbsp;=&nbsp;qrLoginTokenMapper.updateById(qrLoginToken);&nbsp;&nbsp;&nbsp;&nbsp;JSONObject&nbsp;jsonObject&nbsp;=&nbsp;new&nbsp;JSONObject();&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;code&quot;,200);&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;msg&quot;,&quot;ok&quot;);&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;userId&quot;,userId);&nbsp;&nbsp;&nbsp;&nbsp;if(ToolUtil.isNotEmpty(projId)){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsonObject.put(&quot;projId&quot;,projId);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;WebSocketServer.sendInfo(jsonObject.toJSONString(),token);&nbsp;&nbsp;&nbsp;&nbsp;if(i&nbsp;>&nbsp;0&nbsp;){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;null;&nbsp;&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;&nbsp;new&nbsp;Exception(&quot;服务器异常！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;}}逻辑大概就是判断一下 token对不对" data-itemshowtype="0" tab="innerlink" style="color: rgb(0, 0, 0);" data-linktype="2"><span style="color: rgb(0, 0, 0);">逻辑大概就是判断一下 token对不对</span></a>。</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">如果对的话。时间是否过期。如果没有过期进行业务逻辑操作</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">//这句话比较关键<br>WebSocketServer.sendInfo(jsonObject.toJSONString(),token);<br></code></pre><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">就是通知前端已经登录成功了。并且给他业务所需要的内容。</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);">然后前端代码接收到了。就进行业务逻辑操作就可以啦。另外，关注公众号Java技术栈，在后台回复：面试，可以获取我整理的 Java、Spring Boot 系列面试题和答案，非常齐全。</p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);"><em><span style="font-size: 12px;">原文链接：https://blog.csdn.net/q826qq1878/article/details/91041679</span></em></p><p data-tool="mdnice编辑器" style="margin-bottom: 20px;line-height: 1.8em;color: rgb(58, 58, 58);"><span style="font-size: 12px;color: rgb(136, 136, 136);">版权声明：本文为CSDN博主「93年颈椎病人」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;font-size: 16px;text-align: left;white-space: normal;overflow-wrap: break-word !important;box-sizing: border-box !important;"><img data-ratio="0.08658008658008658" data-src="https://mmbiz.qpic.cn/mmbiz_gif/TNUwKhV0JpTGQqtlGfEHkjibtshlaDwVKzjqq2pnpmYC14bKxDtSuhpWZWfVcicj5PFsoSMzuzicKIWZbsBpGXiaicg/640?wx_fmt=gif" data-type="gif" data-w="462" data-width="100%" style="display: block; overflow-wrap: break-word !important; width: 308px !important; height: 26.6667px !important;" _width="328px" src="https://www.muker.cc/index/index/wx?img=https://mmbiz.qpic.cn/mmbiz_gif/TNUwKhV0JpTGQqtlGfEHkjibtshlaDwVKzjqq2pnpmYC14bKxDtSuhpWZWfVcicj5PFsoSMzuzicKIWZbsBpGXiaicg/640?wx_fmt=gif" class="__bg_gif" data-order="0" alt="图片"></p><p style="max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;font-size: 16px;text-align: left;white-space: normal;overflow-wrap: break-word !important;box-sizing: border-box !important;"><br style="max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;font-size: 16px;text-align: left;white-space: normal;overflow-wrap: break-word !important;box-sizing: border-box !important;"><a class="weapp_image_link" data-miniprogram-appid="wxe57fd7ba3fb24ae8" data-miniprogram-path="pages/index/list" data-miniprogram-nickname="Java技术栈" href="" data-miniprogram-type="image" data-miniprogram-servicetype="" style="max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><img class="rich_pages img_loading" data-backh="198" data-backw="558" data-cropselx1="0" data-cropselx2="558" data-cropsely1="0" data-cropsely2="198" data-ratio="0.35555555555555557" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/TNUwKhV0JpQrFpP1qhNbYGZS79nx8EM67X6ErGNS3BwkGrR0906fGEMW59wbUCQDru0ibzSsyEx3hnYknYPGVpw/640?wx_fmt=png" data-type="png" data-w="900" style="border-radius: 3px; overflow-wrap: break-word !important; width: 308px !important; height: 110.8px !important;" _width="100%" src="https://www.muker.cc/index/index/wx?img=https://mmbiz.qpic.cn/mmbiz_png/TNUwKhV0JpQrFpP1qhNbYGZS79nx8EM67X6ErGNS3BwkGrR0906fGEMW59wbUCQDru0ibzSsyEx3hnYknYPGVpw/640?wx_fmt=png" crossorigin="anonymous" alt="图片"></a></p><section style="margin-top: 10px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;font-size: 16px;white-space: normal;text-align: center;overflow-wrap: break-word !important;box-sizing: border-box !important;"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247535009&amp;idx=1&amp;sn=5a0ac485739f9ee7be02bbe938ff0eb3&amp;scene=21#wechat_redirect');" textvalue="你已选中了添加链接的内容" tab="innerlink" data-linktype="1"><span class="js_jump_icon h5_image_link" data-positionback="static" style="max-width: 100%;top: auto;left: auto;right: auto;bottom: auto;overflow-wrap: break-word !important;box-sizing: border-box !important;"><img class="rich_pages img_loading" data-backh="206" data-backw="578" data-cropselx1="0" data-cropselx2="578" data-cropsely1="0" data-cropsely2="206" data-ratio="0.35555555555555557" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/TNUwKhV0JpTKobA9NQFs85mKaCFA8dwfHWvN4gMkTfVs7H19HPic7eKYEB7cYQXoU4xBrcoIoia3xdCCqTticaH4g/640?wx_fmt=png" data-type="png" data-w="900" style="border-radius: 3px; overflow-wrap: break-word !important; width: 308px !important; height: 110.8px !important;" _width="100%" src="https://www.muker.cc/index/index/wx?img=https://mmbiz.qpic.cn/mmbiz_png/TNUwKhV0JpTKobA9NQFs85mKaCFA8dwfHWvN4gMkTfVs7H19HPic7eKYEB7cYQXoU4xBrcoIoia3xdCCqTticaH4g/640?wx_fmt=png" crossorigin="anonymous" alt="图片"></span></a><br style="max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"></section><section style="margin-top: 10px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;font-size: 16px;white-space: normal;min-height: 1em;text-align: center;overflow-wrap: break-word !important;box-sizing: border-box !important;"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247534855&amp;idx=1&amp;sn=fdaf7ea70fca4597d3cc4e18f5ada334&amp;scene=21#wechat_redirect');" textvalue="你已选中了添加链接的内容" tab="innerlink" data-linktype="1"><span class="js_jump_icon h5_image_link" data-positionback="static" style="max-width: 100%;top: auto;left: auto;right: auto;bottom: auto;overflow-wrap: break-word !important;box-sizing: border-box !important;"><img class="rich_pages img_loading" data-backh="206" data-backw="578" data-cropselx1="0" data-cropselx2="578" data-cropsely1="0" data-cropsely2="206" data-ratio="0.35555555555555557" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/TNUwKhV0JpTyQWfk7ZDkDUyJnicmWAq9wssJXmF3ic1iciay2o7WFOgFwEm8DvJfRibj8TPd1oNqXrtJicpINia99b97g/640?wx_fmt=png" data-type="png" data-w="900" style="border-radius: 3px; overflow-wrap: break-word !important; width: 308px !important; height: 110.8px !important;" _width="100%" src="https://www.muker.cc/index/index/wx?img=https://mmbiz.qpic.cn/mmbiz_png/TNUwKhV0JpTyQWfk7ZDkDUyJnicmWAq9wssJXmF3ic1iciay2o7WFOgFwEm8DvJfRibj8TPd1oNqXrtJicpINia99b97g/640?wx_fmt=png" crossorigin="anonymous" alt="图片"></span></a></section><section style="margin-top: 10px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;font-size: 16px;white-space: normal;text-align: center;overflow-wrap: break-word !important;box-sizing: border-box !important;"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247530418&amp;idx=1&amp;sn=e6a0138c7c2f9a9ff6a8b4c878386211&amp;scene=21#wechat_redirect');" textvalue="你已选中了添加链接的内容" tab="innerlink" data-linktype="1"><span class="js_jump_icon h5_image_link" data-positionback="static" style="max-width: 100%;top: auto;left: auto;right: auto;bottom: auto;overflow-wrap: break-word !important;box-sizing: border-box !important;"><img class="rich_pages img_loading" data-backh="206" data-backw="578" data-cropselx1="0" data-cropselx2="578" data-cropsely1="0" data-cropsely2="206" data-ratio="0.35555555555555557" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/TNUwKhV0JpRBr15x0knTrNkibSsCaib9nlpK5hUy9aRzIkiaKARIDXx7aZibEZbicg60QHLYw6OMtkSO4EzaAzYiaMLQ/640?wx_fmt=png" data-type="png" data-w="900" style="border-radius: 3px; inset: auto; overflow-wrap: break-word !important; width: 308px !important; height: 110.8px !important;" _width="100%" src="https://www.muker.cc/index/index/wx?img=https://mmbiz.qpic.cn/mmbiz_png/TNUwKhV0JpRBr15x0knTrNkibSsCaib9nlpK5hUy9aRzIkiaKARIDXx7aZibEZbicg60QHLYw6OMtkSO4EzaAzYiaMLQ/640?wx_fmt=png" crossorigin="anonymous" alt="图片"></span></a></section><section style="margin-top: 10px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;font-size: 16px;white-space: normal;text-align: center;overflow-wrap: break-word !important;box-sizing: border-box !important;"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247535062&amp;idx=1&amp;sn=c34b69e41525dbcb3c473c6986daa801&amp;scene=21#wechat_redirect');" textvalue="你已选中了添加链接的内容" tab="innerlink" data-linktype="1"><span class="js_jump_icon h5_image_link" data-positionback="static" style="max-width: 100%;top: auto;left: auto;right: auto;bottom: auto;overflow-wrap: break-word !important;box-sizing: border-box !important;"><img class="rich_pages img_loading" data-backh="206" data-backw="578" data-cropselx1="0" data-cropselx2="578" data-cropsely1="0" data-cropsely2="206" data-ratio="0.35555555555555557" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/TNUwKhV0JpSEkFqzvxZiaJsULDdCaJiawQBaictB9RC23mdSiaaEZs10kCBMUuyTd7cqBVmnY7RXIukcMiapTq66HSQ/640?wx_fmt=png" data-type="png" data-w="900" style="border-radius: 3px; inset: auto; overflow-wrap: break-word !important; width: 308px !important; height: 110.8px !important;" _width="100%" src="https://www.muker.cc/index/index/wx?img=https://mmbiz.qpic.cn/mmbiz_png/TNUwKhV0JpSEkFqzvxZiaJsULDdCaJiawQBaictB9RC23mdSiaaEZs10kCBMUuyTd7cqBVmnY7RXIukcMiapTq66HSQ/640?wx_fmt=png" crossorigin="anonymous" alt="图片"></span></a><br style="max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"></section><section style="margin-top: 10px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;font-size: 16px;white-space: normal;text-align: center;overflow-wrap: break-word !important;box-sizing: border-box !important;"><a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247535563&amp;idx=1&amp;sn=b2a1de775b95890690e3295aa7e6b253&amp;scene=21#wechat_redirect');" textvalue="你已选中了添加链接的内容" tab="innerlink" data-linktype="1"><span class="js_jump_icon h5_image_link" data-positionback="static" style="max-width: 100%;top: auto;left: auto;right: auto;bottom: auto;overflow-wrap: break-word !important;box-sizing: border-box !important;"><img class="rich_pages img_loading" data-backh="206" data-backw="578" data-cropselx1="0" data-cropselx2="578" data-cropsely1="0" data-cropsely2="206" data-ratio="0.35555555555555557" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/TNUwKhV0JpRgVYEiagLjPA8v8nvWucia842hBvvMp1OWeQWg0xF9xDwrEZyqksic3061IrzqIcSjj2rXehA9hllYQ/640?wx_fmt=png" data-type="png" data-w="900" style="border-radius: 3px; overflow-wrap: break-word !important; width: 308px !important; height: 110.8px !important;" _width="100%" src="https://www.muker.cc/index/index/wx?img=https://mmbiz.qpic.cn/mmbiz_png/TNUwKhV0JpRgVYEiagLjPA8v8nvWucia842hBvvMp1OWeQWg0xF9xDwrEZyqksic3061IrzqIcSjj2rXehA9hllYQ/640?wx_fmt=png" crossorigin="anonymous" alt="图片"></span></a></section><p style="max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;font-size: 16px;white-space: normal;text-align: center;overflow-wrap: break-word !important;box-sizing: border-box !important;"><br style="max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"></p><section data-mpa-template="t" mpa-from-tpl="t" style="max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;font-size: 16px;text-align: left;white-space: normal;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section mpa-from-tpl="t" style="padding-right: 0.5em;padding-left: 0.5em;max-width: 100%;box-sizing: border-box;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;box-sizing: border-box;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;box-sizing: border-box;text-align: center;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;box-sizing: border-box;display: inline-block;vertical-align: top;background-color: rgb(255, 255, 255);overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="margin-bottom: 11px;max-width: 100%;box-sizing: border-box;display: inline-block;vertical-align: bottom;width: 5px;border-right: 1px solid rgb(231, 184, 81);border-left: 1px solid rgb(231, 184, 81);height: 8px;transform-origin: center bottom 0px;transform: skew(-30deg);border-top-color: rgb(231, 184, 81);border-bottom-color: rgb(231, 184, 81);overflow-wrap: break-word !important;"><br style="max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"></section><section mpa-from-tpl="t" style="padding-right: 5px;padding-left: 10px;max-width: 100%;box-sizing: border-box;display: inline-block;vertical-align: top;color: rgb(76, 71, 72);overflow-wrap: break-word !important;"><p style="max-width: 100%;box-sizing: border-box;min-height: 1em;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: Optima-Regular, PingFangTC-light;font-size: 15px;overflow-wrap: break-word !important;box-sizing: border-box !important;"><strong style="max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;">关注Java技术栈看更多干货</strong></span></p></section><section mpa-from-tpl="t" style="margin-right: 4px;margin-bottom: 4px;max-width: 100%;box-sizing: border-box;display: inline-block;vertical-align: bottom;width: 5px;border-right: 1px solid rgb(231, 184, 81);border-left: 1px solid rgb(231, 184, 81);height: 8px;transform-origin: center bottom 0px;transform: skew(-30deg);border-top-color: rgb(231, 184, 81);border-bottom-color: rgb(231, 184, 81);overflow-wrap: break-word !important;"><br style="max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"></section></section><section mpa-from-tpl="t" style="margin-top: -12px;max-width: 100%;box-sizing: border-box;height: 12px;border-top: 1px solid rgb(231, 184, 81);overflow-wrap: break-word !important;"><br style="max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"></section></section></section></section></section><section style="max-width: 100%;font-size: 16px;letter-spacing: 0px;text-align: left;white-space: normal;color: rgb(62, 62, 62);line-height: 2em;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;overflow-wrap: break-word !important;box-sizing: border-box !important;"><p style="margin-top: 10px;max-width: 100%;min-height: 1em;background-color: rgb(255, 255, 255);overflow-wrap: break-word !important;box-sizing: border-box !important;word-break: normal !important;"><img data-backh="279" data-backw="558" data-before-oversubscription-url="https://mmbiz.qpic.cn/mmbiz_jpg/TNUwKhV0JpQiar894HDic0yJSCHN19dmct0zTB1I3ib1uiaibB0XWIHOJdXWNmq4ZKHTVL6wS24ThQfY5ibqfqNKLung/640" data-copyright="0" data-ratio="0.5004444444444445" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/TNUwKhV0JpQiar894HDic0yJSCHN19dmct0zTB1I3ib1uiaibB0XWIHOJdXWNmq4ZKHTVL6wS24ThQfY5ibqfqNKLung/640?wx_fmt=jpeg" data-type="jpeg" data-w="1125" style="font-size: 14px; color: rgb(63, 62, 63); letter-spacing: 1px; text-align: right; border-radius: 3px; overflow-wrap: break-word !important; box-sizing: border-box !important; word-break: normal !important; width: 308px !important; height: 155.136px !important;" _width="100%" class="img_loading" src="https://www.muker.cc/index/index/wx?img=https://mmbiz.qpic.cn/mmbiz_jpg/TNUwKhV0JpQiar894HDic0yJSCHN19dmct0zTB1I3ib1uiaibB0XWIHOJdXWNmq4ZKHTVL6wS24ThQfY5ibqfqNKLung/640?wx_fmt=jpeg" crossorigin="anonymous" alt="图片"></p><section style="margin-top: 10px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section mpa-from-tpl="t" style="max-width: 100%;letter-spacing: 0px;display: inline-block;width: 30px;overflow-wrap: break-word !important;box-sizing: border-box !important;"><img data-ratio="1" data-src="https://mmbiz.qpic.cn/mmbiz_gif/jZXlUHNuBN5a6JWIdk82cPD8FSSoqjutJcFTXQH1jWPa2pUnwgsOkb95nNBTkMiamwxeAHKFba0FdqKDthpdlibQ/640?wx_fmt=gif" data-type="gif" data-w="400" style="display: inline-block; vertical-align: middle; overflow-wrap: break-word !important; width: 30px !important; height: 30px !important;" _width="328px" class="img_loading __bg_gif" src="https://www.muker.cc/index/index/wx?img=https://mmbiz.qpic.cn/mmbiz_gif/jZXlUHNuBN5a6JWIdk82cPD8FSSoqjutJcFTXQH1jWPa2pUnwgsOkb95nNBTkMiamwxeAHKFba0FdqKDthpdlibQ/640?wx_fmt=gif" data-order="1" alt="图片"></section><section data-brushtype="text" mpa-from-tpl="t" style="margin-left: 5px;max-width: 100%;letter-spacing: 0px;display: inline-block;vertical-align: middle;font-size: 12px;overflow-wrap: break-word !important;box-sizing: border-box !important;"><span style="max-width: 100%;font-size: 14px;overflow-wrap: break-word !important;box-sizing: border-box !important;">获取 Spring Boot 实战笔记！</span></section></section></section></section>                </div><div>来源:https://mp.weixin.qq.com/s/0jBsmKermiOLdwhmWfR-mg</div>                        
                        <!-- E 正文 -->
                    </div>

                    <!-- S 付费阅读 -->
<!-- E 付费阅读 -->


                    <!-- S 点赞 -->
<div class="article-donate">
    <a href="javascript:" class="btn btn-primary btn-like btn-lg" data-action="vote" data-type="like" data-id="157" data-tag="archives"><i class="fa fa-thumbs-up"></i> 点赞(<span>0</span>)</a>
    <a href="javascript:" class="btn btn-outline-primary btn-donate btn-lg" data-action="donate" data-id="157" data-image="/uploads/20210611/c81a0eac1c3e5de3ecee547f7d6afebb.png"><i class="fa fa-cny"></i> 打赏</a>
</div>
<!-- E 点赞 -->


                    

<!-- S 分享 -->
<div class="social-share text-center mt-2 mb-1" data-initialized="true" data-mode="prepend" data-image="https://www.muker.cc/assets/addons/cms/img/noimage.jpg">
    <a href="javascript:;" class="social-share-icon icon-heart addbookbark" data-type="archives" data-aid="157" data-action="../../addons/cms/ajax/collection.html"></a>
    <a href="#" class="social-share-icon icon-weibo" target="_blank"></a>
    <a href="#" class="social-share-icon icon-qq" target="_blank"></a>
    <a href="#" class="social-share-icon icon-qzone" target="_blank"></a>
    <a href="#" class="social-share-icon icon-wechat"></a>
</div>

<!-- E 分享 -->


                    <div class="entry-meta">
    <ul>
        <!-- S 归档 -->
        <li>本文分类：<a href="../tech2.html">技术</a></li>
        <li>本文标签：无</li>
        <li>浏览次数：<span>483</span> 次浏览</li>
        <li>发布日期：2021-07-06 14:07:17</li>
        <li>本文链接：<a href=""></a></li>
        <!-- S 归档 -->
    </ul>

    <ul class="article-prevnext">
        <!-- S 上一篇下一篇 -->
                <li>
            <span>上一篇 &gt;</span>
            <a href="156.html">.NET MAUI 预览版 6 发布</a>
        </li>
                <li>
            <span>下一篇 &gt;</span>
            <a href="161.html">TypeScript 4.4首个Beta版本发布</a>
        </li>
                <!-- E 上一篇下一篇 -->
    </ul>
</div>


                    <div class="related-article">
    <div class="row">
        <!-- S 相关文章 -->
                <div class="col-sm-3 col-xs-6">
            <a href="209.html" class="img-zoom">
                <div class="embed-responsive embed-responsive-4by3">
                    <img src="https://mmbiz.qpic.cn/mmbiz_gif/VeJKXItpwPVibOSMQeyaGwgUuVlcQvxkGXXWJd5ibVobOMbl2fuGGsbm5Ric4aJjgUiahJfqib9xbibDticDldfIziaT8g/640" alt="自动驾驶中实时车道检测和警报" class="embed-responsive-item">
                </div>
            </a>
            <h5 class="text-center"><a href="209.html">自动驾驶中实时车道检测和警报</a></h5>
        </div>
                <div class="col-sm-3 col-xs-6">
            <a href="208.html" class="img-zoom">
                <div class="embed-responsive embed-responsive-4by3">
                    <img src="https://mmbiz.qpic.cn/mmbiz_png/g64sbb6Ffmf8BlRqqSlFHeQWmcyPGLbJk79Wr6BSLvZEX1aMKzs0e4QmJ2qYgK1iaBUj5uheXZzyGMRTPOeibv3w/640" alt="深度盘点Python11个主流框架：Pandas、Django、Matplotlib、Numpy、PyTorch......" class="embed-responsive-item">
                </div>
            </a>
            <h5 class="text-center"><a href="208.html">深度盘点Python11个主流框架：Pandas、Django、Matplotlib、Numpy、PyTorch......</a></h5>
        </div>
                <div class="col-sm-3 col-xs-6">
            <a href="207.html" class="img-zoom">
                <div class="embed-responsive embed-responsive-4by3">
                    <img src="https://mmbiz.qpic.cn/mmbiz_gif/VeJKXItpwPVibOSMQeyaGwgUuVlcQvxkGXXWJd5ibVobOMbl2fuGGsbm5Ric4aJjgUiahJfqib9xbibDticDldfIziaT8g/640" alt="太酷了，Python 制作足球可视化图表 | 代码干货" class="embed-responsive-item">
                </div>
            </a>
            <h5 class="text-center"><a href="207.html">太酷了，Python 制作足球可视化图表 | 代码干货</a></h5>
        </div>
                <div class="col-sm-3 col-xs-6">
            <a href="../yunwei/206.html" class="img-zoom">
                <div class="embed-responsive embed-responsive-4by3">
                    <img src="https://mmbiz.qpic.cn/mmbiz_gif/IP70Vic417DOjMRrV3RrW2HaXlrTFpEI1EYiaJaJkfYOvEuQc3F6RibYXS9oMIvvJNCywron0Wd809g43gmTHlqEA/640" alt="PyTorch 1.8 和 Tensorflow 2.5，我该用哪个？" class="embed-responsive-item">
                </div>
            </a>
            <h5 class="text-center"><a href="../yunwei/206.html">PyTorch 1.8 和 Tensorflow 2.5，我该用哪个？</a></h5>
        </div>
                <!-- E 相关文章 -->
    </div>
</div>


                    <div class="clearfix"></div>
                </div>
            </div>

            <div class="panel panel-default" id="comments">
                <div class="panel-heading">
                    <h3 class="panel-title">评论列表                        <small>共有 <span>0</span> 条评论</small>
                    </h3>
                </div>
                <div class="panel-body">
                                        <div id="comment-container">
    <!-- S 评论列表 -->
    <div id="commentlist">
                <div class="loadmore loadmore-line loadmore-nodata"><span class="loadmore-tips">暂无评论</span></div>
            </div>
    <!-- E 评论列表 -->

    <!-- S 评论分页 -->
    <div id="commentpager" class="text-center">
            </div>
    <!-- E 评论分页 -->

    <!-- S 发表评论 -->
    <div id="postcomment">
        <h3>发表评论 <a href="javascript:;">
            <small>取消回复</small>
        </a></h3>
        <form action="../../addons/cms/comment/post.html" method="post" id="postform">
            <input type="hidden" name="__token__" value="8702e3e0a787a72a70fb68004d6173d9">            <input type="hidden" name="type" value="archives">
            <input type="hidden" name="aid" value="157">
            <input type="hidden" name="pid" id="pid" value="0">
            <div class="form-group">
                <textarea name="content" class="form-control" disabled="" placeholder="请登录后再发表评论" id="commentcontent" cols="6" rows="5" tabindex="4"></textarea>
            </div>
                        <div class="form-group">
                <a href="../../index/user/login1.html" class="btn btn-primary">登录</a>
                <a href="../../index/user/register.html" class="btn btn-outline-primary">注册新账号</a>
            </div>
                    </form>
    </div>
    <!-- E 发表评论 -->
</div>

                                    </div>
            </div>

        </main>

        <aside class="col-xs-12 col-sm-4">
                        <!-- S 关于作者 -->
            <div class="panel panel-default about-author" data-id="2" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <meta itemprop="name" content="clrs">
                <meta itemprop="image" content="/uploads/20210611/1c33f3b2e46303967d5fa6e70be59f24.png">
                <meta itemprop="url" content="/u/2">
                <div class="panel-heading">
                    <h3 class="panel-title">关于作者</h3>
                </div>
                <div class="panel-body">
                    <div class="media">
                        <div class="media-left">
                            <a href="../../u/2.html">
                                <img class="media-object img-circle img-medium" style="width:64px;height:64px;" src="https://www.muker.cc/uploads/20210611/1c33f3b2e46303967d5fa6e70be59f24.png" data-holder-rendered="true">
                            </a>
                        </div>
                        <div class="media-body">
                            <h3 style="margin-top:10px;" class="media-heading">
                                <a href="../../u/2.html">clrs</a>
                            </h3>
                            这家伙很懒，什么也没写！                        </div>
                    </div>
                </div>
            </div>
            <!-- E 关于作者 -->
                        
<div class="panel panel-blockimg">
    <p><img src="https://www.muker.cc/uploads/20210616/89c87bce97dfae0c305ab5741caf5259.png"></p>
</div>

<!-- S 热门资讯 -->
<div class="panel panel-default hot-article">
    <div class="panel-heading">
        <h3 class="panel-title">推荐资讯</h3>
    </div>
    <div class="panel-body">
            </div>
</div>
<!-- E 热门资讯 -->

<div class="panel panel-blockimg">
    <p><img src="https://www.muker.cc/uploads/20210616/89c87bce97dfae0c305ab5741caf5259.png"></p>
</div>

<!-- S 热门标签 -->
<div class="panel panel-default hot-tags">
    <div class="panel-heading">
        <h3 class="panel-title">热门标签</h3>
    </div>
    <div class="panel-body">
        <div class="tags">
                        <a href="../t/驰为.html" class="tag"> <span>驰为</span></a>
                        <a href="../t/树莓派.html" class="tag"> <span>树莓派</span></a>
                        <a href="../t/pc.html" class="tag"> <span>PC</span></a>
                        <a href="../t/鸿蒙.html" class="tag"> <span>鸿蒙</span></a>
                        <a href="../t/jwt.html" class="tag"> <span>JWT</span></a>
                        <a href="../t/视频转换器.html" class="tag"> <span>视频转换器</span></a>
                        <a href="../t/.net.html" class="tag"> <span>. net</span></a>
                        <a href="../t/虚拟录音.html" class="tag"> <span>虚拟录音</span></a>
                        <a href="../t/vr.html" class="tag"> <span>VR</span></a>
                        <a href="../t/devops.html" class="tag"> <span>DevOps</span></a>
                        <a href="../t/视频制作.html" class="tag"> <span>视频制作</span></a>
                        <a href="../t/ddd.html" class="tag"> <span>DDD</span></a>
                        <a href="../t/博客写作.html" class="tag"> <span>博客写作</span></a>
                        <a href="../t/音乐播放器.html" class="tag"> <span>音乐播放器</span></a>
                        <a href="../t/.netcore.html" class="tag"> <span>. net core</span></a>
                        <a href="../t/dropbox.html" class="tag"> <span>dropbox</span></a>
                        <a href="../t/ftp工具.html" class="tag"> <span>FTP工具</span></a>
                        <a href="../t/音频录制.html" class="tag"> <span>音频录制</span></a>
                        <a href="../t/golang.html" class="tag"> <span>Golang</span></a>
                        <a href="../t/无线wifi网络管理.html" class="tag"> <span>无线WiFi网络管理</span></a>
                        <a href="../t/投资.html" class="tag"> <span>投资</span></a>
                        <a href="../t/gitlab.html" class="tag"> <span>gitlab</span></a>
                        <a href="../t/互联网.html" class="tag"> <span>互联网</span></a>
                        <a href="../t/宏基.html" class="tag"> <span>宏基</span></a>
                        <a href="../t/小米.html" class="tag"> <span> 小米</span></a>
                        <a href="../t/线程.html" class="tag"> <span> 线程</span></a>
                        <a href="../t/.net1.html" class="tag"> <span>.net</span></a>
                        <a href="../t/日志工具.html" class="tag"> <span>日志工具</span></a>
                        <a href="../t/开源.html" class="tag"> <span>开源</span></a>
                        <a href="../t/美团.html" class="tag"> <span>美团</span></a>
                    </div>
    </div>
</div>
<!-- E 热门标签 -->

<!-- S 推荐下载 -->
<div class="panel panel-default recommend-article">
    <div class="panel-heading">
        <h3 class="panel-title">推荐下载</h3>
    </div>
    <div class="panel-body">
                <div class="media media-number">
            <div class="media-left">
                <span class="num">1</span>
            </div>
            <div class="media-body">
                <a href="../app/44.html" title="Compressor 4.4.4 苹果官方出品视频解码格式转换工具">Compressor 4.4.4 苹果官方出品视频解码格式转换工具</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">2</span>
            </div>
            <div class="media-body">
                <a href="../app/47.html" title="Pikka 2.0.4 菜单栏屏幕取色器">Pikka 2.0.4 菜单栏屏幕取色器</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">3</span>
            </div>
            <div class="media-body">
                <a href="../media/49.html" title="iShowU Instant 1.2.11 实时屏幕录制软件">iShowU Instant 1.2.11 实时屏幕录制软件</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">4</span>
            </div>
            <div class="media-body">
                <a href="../media/50.html" title="VideoProc 3.2(2019013001) 视频格式转换">VideoProc 3.2(2019013001) 视频格式转换</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">5</span>
            </div>
            <div class="media-body">
                <a href="../media/51.html" title="RightFont 5.4.1(2474) 超级好用的字体管理工具">RightFont 5.4.1(2474) 超级好用的字体管理工具</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">6</span>
            </div>
            <div class="media-body">
                <a href="../media/52.html" title="SPlayerX 4.1.4 射手播放器">SPlayerX 4.1.4 射手播放器</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">7</span>
            </div>
            <div class="media-body">
                <a href="../media/54.html" title="Meta 1.9.2(2358) 音频元数据音乐标签信息编辑器">Meta 1.9.2(2358) 音频元数据音乐标签信息编辑器</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">8</span>
            </div>
            <div class="media-body">
                <a href="../media/57.html" title="Camtasia 2018.0.8(105822) 强大且易用的视频录制和剪辑软件">Camtasia 2018.0.8(105822) 强大且易用的视频录制和剪辑软件</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">9</span>
            </div>
            <div class="media-body">
                <a href="../media/60.html" title="Cinemagraph Pro 2.7.1 专业的动态图片与视频制作工具">Cinemagraph Pro 2.7.1 专业的动态图片与视频制作工具</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">10</span>
            </div>
            <div class="media-body">
                <a href="../media/62.html" title="MacX Video Converter Pro 6.4.0(20181213) 视频转换器">MacX Video Converter Pro 6.4.0(20181213) 视频转换器</a>
            </div>
        </div>
            </div>
</div>
<!-- E 推荐下载 -->

<div class="panel panel-blockimg">
    <p><img src="https://www.muker.cc/uploads/20210616/89c87bce97dfae0c305ab5741caf5259.png"></p>
</div>

        </aside>
    </div>
</div>

</main>

<footer>
    <div class="container-fluid" id="footer">
        <div class="container">
            <div class="row footer-inner">
                <div class="col-md-3 col-sm-3">
                            <div class="footer-logo">
                                <a href="#"><i class="fa fa-bookmark"></i></a>
                            </div>
                            <p class="copyright"><small>© 2020-2021 穆客智能 All Rights Reserved.</small></p>
                        </div>
                        <div class="col-md-5 col-md-push-1 col-sm-5 col-sm-push-1">
                            <div class="row">
                                <div class="col-xs-4">
                                    <ul class="links">
                                        <li><a href="javascript:window.open('https://www.muker.club/cms/p/aboutus.html');">关于我们</a></li>
                                        <li><a href="#">发展历程</a></li>
                                        <li><a href="#">服务项目</a></li>
                                        <li><a href="#">团队成员</a></li>
                                    </ul>
                                </div>
                                <div class="col-xs-4">
                                    <ul class="links">
                                        <li><a href="#">新闻</a></li>
                                        <li><a href="#">资讯</a></li>
                                        <li><a href="#">推荐</a></li>
                                        <li><a href="#">博客</a></li>
                                    </ul>
                                </div>
                                <div class="col-xs-4">
                                    <ul class="links">
                                        <li><a href="#">服务</a></li>
                                        <li><a href="#">圈子</a></li>
                                        <li><a href="#">论坛</a></li>
                                        <li><a href="#">广告</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-3 col-md-push-1 col-sm-push-1">
                            <div class="footer-social">
                                <a href="#"><i class="fa fa-weibo"></i></a>
                                <a href="#"><i class="fa fa-qq"></i></a>
                                <a href="#"><i class="fa fa-wechat"></i></a>
                            </div>
                        </div>
            </div>
        </div>
    </div>
</footer>

<div id="floatbtn">
    <!-- S 浮动按钮 -->

        <a href="javascript:;">
        <i class="iconfont icon-wxapp"></i>
        <div class="floatbtn-wrapper">
            <div class="qrcode"><img src="https://www.muker.cc/uploads/20210611/f75e8bc38b426f1a8ae2604807729aca.jpg"></div>
            <p>微信小程序</p>
            <p>微信扫一扫体验</p>
        </div>
    </a>
    
    <a class="hover" href="../../index/cms.archives/post.html" target="_blank">
        <i class="iconfont icon-pencil"></i>
        <em>立即<br>投稿</em>
    </a>

    <div class="floatbtn-item floatbtn-share">
        <i class="iconfont icon-share"></i>
        <div class="floatbtn-wrapper" style="height:50px;top:0">
            <div class="social-share" data-initialized="true" data-mode="prepend">
                <a href="#" class="social-share-icon icon-weibo" target="_blank"></a>
                <a href="#" class="social-share-icon icon-qq" target="_blank"></a>
                <a href="#" class="social-share-icon icon-qzone" target="_blank"></a>
                <a href="#" class="social-share-icon icon-wechat"></a>
            </div>
        </div>
    </div>

        <a href="javascript:;">
        <i class="iconfont icon-qrcode"></i>
        <div class="floatbtn-wrapper">
            <div class="qrcode"><img src="https://www.muker.cc/uploads/20210611/f75e8bc38b426f1a8ae2604807729aca.jpg"></div>
            <p>微信公众账号</p>
            <p>微信扫一扫加关注</p>
        </div>
    </a>
        <a id="feedback" class="hover" href="#comments">
        <i class="iconfont icon-feedback"></i>
        <em>发表<br>评论</em>
    </a>
    
    <a id="back-to-top" class="hover" href="javascript:;">
        <i class="iconfont icon-backtotop"></i>
        <em>返回<br>顶部</em>
    </a>
    <!-- E 浮动按钮 -->
</div>


<script type="text/javascript" src="https://www.muker.cc/assets/libs/jquery/dist/jquery.min.js?v=1.0.97"></script>
<script type="text/javascript" src="https://www.muker.cc/assets/libs/bootstrap/dist/js/bootstrap.min.js?v=1.0.97"></script>
<script type="text/javascript" src="https://www.muker.cc/assets/libs/fastadmin-layer/dist/layer.js?v=1.0.97"></script>
<script type="text/javascript" src="https://www.muker.cc/assets/libs/art-template/dist/template-native.js?v=1.0.97"></script>
<script type="text/javascript" src="https://www.muker.cc/assets/addons/cms/js/jquery.autocomplete.js?v=1.0.97"></script>
<script type="text/javascript" src="https://www.muker.cc/assets/addons/cms/js/swiper.min.js?v=1.0.97"></script>
<script type="text/javascript" src="https://www.muker.cc/assets/addons/cms/js/share.min.js?v=1.0.97"></script>
<script type="text/javascript" src="https://www.muker.cc/assets/addons/cms/js/cms.js?v=1.0.97"></script>
<script type="text/javascript" src="https://www.muker.cc/assets/addons/cms/js/common.js?v=1.0.97"></script>

<script type="text/javascript">(function(){window['__CF$cv$params']={r:'6c0998cc5dc47550',m:'2S0IoyDiqAxMblzFSojuSUUnFdTmOcw1GsbcHQBSN1c-1640010923-0-AUds1br68aden7U1V9I/tYG6xv08Fz1C2F0bFbyqjQfTFnN+QXQfopU4mXt0BjYbXMmL44LZR8GySWQM6+VOafx5oaSZZDEcXgEw60qi8ou3zLzaUPbYU+09K01aKcFq4DYvSvASJfmZQYuzHcyXGl0=',s:[0x9afcfb68e4,0xc0afb98224],u:'/cdn-cgi/challenge-platform/h/g'}})();</script></body>
</html>
