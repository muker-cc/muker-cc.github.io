<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class=""> <!--<![endif]-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="renderer" content="webkit">
    <title>用 Go 写一个轻量级的 ssh 批量操作工具 - 技术改变生活</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
<meta name="referrer" content="never">
    <link rel="shortcut icon" href="https://www.muker.cc/assets/img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" media="screen" href="https://www.muker.cc/assets/css/bootstrap.min.css?v=1.0.97">
    <link rel="stylesheet" media="screen" href="https://www.muker.cc/assets/libs/font-awesome/css/font-awesome.min.css?v=1.0.97">
    <link rel="stylesheet" media="screen" href="https://www.muker.cc/assets/libs/fastadmin-layer/dist/theme/default/layer.css?v=1.0.97">
    <link rel="stylesheet" media="screen" href="https://www.muker.cc/assets/addons/cms/css/swiper.min.css?v=1.0.97">
    <link rel="stylesheet" media="screen" href="https://www.muker.cc/assets/addons/cms/css/share.min.css?v=1.0.97">
    <link rel="stylesheet" media="screen" href="https://www.muker.cc/assets/addons/cms/css/iconfont.css?v=1.0.97">
    <link rel="stylesheet" media="screen" href="https://www.muker.cc/assets/addons/cms/css/common.css?v=1.0.97">

    <!--[if lt IE 9]>
    <script src="/libs/html5shiv.js"></script>
    <script src="/libs/respond.min.js"></script>
    <![endif]-->

<script async="" src='https://www.muker.cc/cdn-cgi/challenge-platform/h/g/scripts/invisible.js'></script></head>
<body class="group-page">

<header class="header">
    <!-- S 导航 -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">

            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../index.html"><img src="https://www.muker.cc/uploads/20210611/12b922043e5247eeca1b833a969486c3.png" height="40" alt=""></a>
            </div>

            <div class="collapse navbar-collapse" id="navbar-collapse">
                <ul class="nav navbar-nav" data-current="34">
                    <!--如果你需要自定义NAV,可使用channellist标签来完成,这里只设置了2级,如果显示无限级,请使用cms:nav标签-->
                                        <!--判断是否有子级或高亮当前栏目-->
                    <li class="">
                        <a href="../../index.html">首页</a>
                        <ul class="dropdown-menu" role="menu">
                                                    </ul>
                    </li>
                                        <!--判断是否有子级或高亮当前栏目-->
                    <li class="">
                        <a href="../../cms2.html">新闻动态</a>
                        <ul class="dropdown-menu" role="menu">
                                                    </ul>
                    </li>
                                        <!--判断是否有子级或高亮当前栏目-->
                    <li class="">
                        <a href="javascript:window.open('https://www.clrs.me/');">博客</a>
                        <ul class="dropdown-menu" role="menu">
                                                    </ul>
                    </li>
                                        <!--判断是否有子级或高亮当前栏目-->
                    <li class="">
                        <a href="../special/hmtech.html">鸿蒙专题</a>
                        <ul class="dropdown-menu" role="menu">
                                                    </ul>
                    </li>
                                        <!--判断是否有子级或高亮当前栏目-->
                    <li class="dropdown">
                        <a href="../product.html" data-toggle="dropdown">产品中心 <b class="caret"></b></a>
                        <ul class="dropdown-menu" role="menu">
                                                        <li><a href="../p/reload.html">充值缴费</a></li>
                                                        <li><a href="../weixingongju.html">微信工具</a></li>
                                                        <li><a href="../dianshangxitong.html">电商系统</a></li>
                                                        <li><a href="../zaixianjiaoyu.html">在线教育</a></li>
                                                        <li><a href="../quanziluntan.html">圈子论坛</a></li>
                                                        <li><a href="../neirongguanlicms.html">内容管理(CMS)</a></li>
                                                        <li><a href="../yumingchushou.html">域名出售</a></li>
                                                        <li><a href="../opensource.html">开源项目</a></li>
                                                    </ul>
                    </li>
                                        <!--判断是否有子级或高亮当前栏目-->
                    <li class="dropdown">
                        <a href="#" data-toggle="dropdown">解决方案 <b class="caret"></b></a>
                        <ul class="dropdown-menu" role="menu">
                                                        <li><a href="../qiyejiejuefangan.html">企业解决方案</a></li>
                                                        <li><a href="../p/tongyongjiejuefangan.html">通用解决方案</a></li>
                                                    </ul>
                    </li>
                                        <!--判断是否有子级或高亮当前栏目-->
                    <li class="dropdown">
                        <a href="../download.html" data-toggle="dropdown">下载中心 <b class="caret"></b></a>
                        <ul class="dropdown-menu" role="menu">
                                                        <li><a href="../fuwuqi.html">服务器</a></li>
                                                        <li><a href="../caozuoxitong.html">操作系统</a></li>
                                                    </ul>
                    </li>
                    
                    <!--如果需要无限级请使用cms:nav标签-->
                    
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <form class="form-inline navbar-form" action="../s.html" method="get">
                            <div class="form-search hidden-sm hidden-md">
                                <input class="form-control" name="q" data-suggestion-url="/addons/cms/search/suggestion.html" type="text" id="searchinput" value="" placeholder="搜索">
                            </div>
                            <input type="hidden" name="__searchtoken__" value="848a7224ef3852e119b850c39ed6d152">                        </form>
                    </li>
                    <li class="dropdown">
                                                <a href="../../index/user/index1.html" class="dropdown-toggle" data-toggle="dropdown">会员<span class="hidden-sm">中心</span> <b class="caret"></b></a>
                                                <ul class="dropdown-menu">
                                                        <li><a href="../../index/user/login1.html"><i class="fa fa-sign-in fa-fw"></i> 登录</a></li>
                            <li><a href="../../index/user/register.html"><i class="fa fa-user-o fa-fw"></i> 注册</a></li>
                                                    </ul>
                    </li>
                </ul>
            </div>

        </div>
    </nav>
    <!-- E 导航 -->

</header>

<main class="main-content">
    

<div class="container" id="content-container">

    <div class="row">

        <main class="col-md-8">
            <div class="panel panel-default article-content">
                <div class="panel-heading">
                    <ol class="breadcrumb">
                        <!-- S 面包屑导航 -->
                                                <li><a href="../index.html">首页</a></li>
                                                <li><a href="../tech2.html">技术</a></li>
                                                <!-- E 面包屑导航 -->
                    </ol>
                </div>
                <div class="panel-body">
                    <div class="article-metas">
                        <h1 class="metas-title">用 Go 写一个轻量级的 ssh 批量操作工具</h1>

                        <div class="metas-body">
                                                        <span class="views-num">
                                <i class="fa fa-eye"></i> 347 阅读
                            </span>
                            <span class="comment-num">
                                <i class="fa fa-comments"></i> 0 评论
                            </span>
                            <span class="like-num">
                                <i class="fa fa-thumbs-o-up"></i>
                                <span class="js-like-num"> 0 点赞
                                </span>
                            </span>
                        </div>
                        
                    </div>

                    <div class="article-text">
                        <!-- S 正文 -->
                        <p>
                                                        <div class="rich_media_content " id="js_content" style="visibility: visible;">                                                                                                    <section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="color: black;padding-right: 10px;padding-left: 10px;line-height: 1.6;letter-spacing: 0px;word-break: break-word;overflow-wrap: break-word;text-align: left;font-family: Helvetica;font-size: 15px;"><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">【导读】go 语言跨平台运行效果很棒，做一个简单的批量远程操作工具，有什么好方法？本文做了详细介绍。</p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="display: none;"></span><span style="font-size: 16px;color: #6b1029;">前言</span><span style="display: none;"></span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">这是一个轮子。</p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">大家都知道 Ansible 是功能超级强大的自动化运维工具，十分的高大上。太高大上了以至于在低端运维有点水土不服，在于三点：</p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;color: rgb(128, 19, 50);" class="list-paddingleft-2"><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">Ansible 是基于 Python 的，而 Python 下的安装是有一堆依赖的。不要笑！对于很多使用 Win 的用户而言，光是装 Python， 装 pip 就够喝一壶的了。</section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">Ansible 的 paybook 所使用的 yaml 语法当然非常强大了。然而对于新人而言，刚入手是玩不转的，需要学习。虽然 Ansible 相比其他的自动化运维工具，它的学习曲线已经非常平易近人了，但毕竟还是要学一下的不是么</section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">Ansible 自动化运维 Linux 服务器得益于 Linux 上 python 的默认支持，功能非常强大。然而如果拿来跑交换机的话，因为交换机上通常没有 python 环境，功能就要打很多折扣了。基本上也就是执行一系列的命令组合。而我们这种有大片园区网的传统单位，运维的大头是交换机~</section></li></ol><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">所以造这个轮子的出发点是基于以下考虑的：</p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;color: rgb(128, 19, 50);" class="list-paddingleft-2"><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">要跨平台，木有依赖，开箱即用。用 Go 来撸一个就能很好的满足这个需求。你看 Open-Falcon 的 agent，ELK 的 beats ，都选择用 Go 来实现，就是这个原因。</section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">简单无脑，无需学习。直接堆砌命令行就行，就像我们初始化交换机的那种命令行组合模板。只要 cli 会玩，直接照搬过来就行。</section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">要支持并发。这个是 Go 的强项了，无需多言。</section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">最后当然是学习 Go 啦。</section></li></ol><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">一点都没有黑 Ansible 的意思。我们也有在用 Ansible 来做自动化运维的工作，我觉得所有运维最好都学习下 Ansible，将来总是要往自动化的方向走的。这个轮子的目的在于学习 Ansible 之前，先有个够简单无脑的工具解决下眼前的需求~</p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="display: none;"></span><span style="font-size: 16px;color: #6b1029;">建立 ssh 会话</span><span style="display: none;"></span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">Go 自身不带 ssh 包。他的 ssh 包放在了 https://godoc.org/golang.org/x/crypto/ssh 这里。import 他就好</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;"><span style="color: #f92672;font-weight: bold;line-height: 26px;">import</span>&nbsp;<span style="color: #a6e22e;line-height: 26px;">"golang.org/x/crypto/ssh"</span><br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">首先我们需要建立一个 ssh 会话，比如这样。</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;"><span style="line-height: 26px;"><span style="color: #f92672;font-weight: bold;line-height: 26px;">func</span>&nbsp;<span style="color: #a6e22e;font-weight: bold;line-height: 26px;">connect</span><span style="line-height: 26px;">(user,&nbsp;password,&nbsp;host,&nbsp;key&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">string</span>,&nbsp;port&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">int</span>,&nbsp;cipherList&nbsp;[]<span style="color: #f92672;font-weight: bold;line-height: 26px;">string</span>)</span>&nbsp;<span style="line-height: 26px;">(*ssh.Session,&nbsp;error)</span></span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">var</span>&nbsp;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auth&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[]ssh.AuthMethod<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">string</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clientConfig&nbsp;*ssh.ClientConfig<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*ssh.Client<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;config&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssh.Config<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;session&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*ssh.Session<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error<br>&nbsp;&nbsp;&nbsp;&nbsp;)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;get&nbsp;auth&nbsp;method</span><br>&nbsp;&nbsp;&nbsp;&nbsp;auth&nbsp;=&nbsp;<span style="color: #a6e22e;line-height: 26px;">make</span>([]ssh.AuthMethod,&nbsp;<span style="line-height: 26px;">0</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">if</span>&nbsp;key&nbsp;==&nbsp;<span style="color: #a6e22e;line-height: 26px;">""</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auth&nbsp;=&nbsp;<span style="color: #a6e22e;line-height: 26px;">append</span>(auth,&nbsp;ssh.Password(password))<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pemBytes,&nbsp;err&nbsp;:=&nbsp;ioutil.ReadFile(key)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">if</span>&nbsp;err&nbsp;!=&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">return</span>&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span>,&nbsp;err<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">var</span>&nbsp;signer&nbsp;ssh.Signer<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">if</span>&nbsp;password&nbsp;==&nbsp;<span style="color: #a6e22e;line-height: 26px;">""</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signer,&nbsp;err&nbsp;=&nbsp;ssh.ParsePrivateKey(pemBytes)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signer,&nbsp;err&nbsp;=&nbsp;ssh.ParsePrivateKeyWithPassphrase(pemBytes,&nbsp;[]<span style="color: #f92672;font-weight: bold;line-height: 26px;">byte</span>(password))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">if</span>&nbsp;err&nbsp;!=&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">return</span>&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span>,&nbsp;err<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auth&nbsp;=&nbsp;<span style="color: #a6e22e;line-height: 26px;">append</span>(auth,&nbsp;ssh.PublicKeys(signer))<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">if</span>&nbsp;<span style="color: #a6e22e;line-height: 26px;">len</span>(cipherList)&nbsp;==&nbsp;<span style="line-height: 26px;">0</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;config&nbsp;=&nbsp;ssh.Config{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ciphers:&nbsp;[]<span style="color: #f92672;font-weight: bold;line-height: 26px;">string</span>{<span style="color: #a6e22e;line-height: 26px;">"aes128-ctr"</span>,&nbsp;<span style="color: #a6e22e;line-height: 26px;">"aes192-ctr"</span>,&nbsp;<span style="color: #a6e22e;line-height: 26px;">"aes256-ctr"</span>,&nbsp;<span style="color: #a6e22e;line-height: 26px;">"<a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="6e0f0b1d5f5c5643090d032e011e0b001d1d06400d0103">[email&#160;protected]</a>"</span>,&nbsp;<span style="color: #a6e22e;line-height: 26px;">"arcfour256"</span>,&nbsp;<span style="color: #a6e22e;line-height: 26px;">"arcfour128"</span>,&nbsp;<span style="color: #a6e22e;line-height: 26px;">"aes128-cbc"</span>,&nbsp;<span style="color: #a6e22e;line-height: 26px;">"3des-cbc"</span>,&nbsp;<span style="color: #a6e22e;line-height: 26px;">"aes192-cbc"</span>,&nbsp;<span style="color: #a6e22e;line-height: 26px;">"aes256-cbc"</span>},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;config&nbsp;=&nbsp;ssh.Config{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ciphers:&nbsp;cipherList,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;clientConfig&nbsp;=&nbsp;&amp;ssh.ClientConfig{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;User:&nbsp;&nbsp;&nbsp;&nbsp;user,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Auth:&nbsp;&nbsp;&nbsp;&nbsp;auth,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Timeout:&nbsp;<span style="line-height: 26px;">30</span>&nbsp;*&nbsp;time.Second,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Config:&nbsp;&nbsp;config,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HostKeyCallback:&nbsp;<span style="line-height: 26px;"><span style="color: #f92672;font-weight: bold;line-height: 26px;">func</span><span style="line-height: 26px;">(hostname&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">string</span>,&nbsp;remote&nbsp;net.Addr,&nbsp;key&nbsp;ssh.PublicKey)</span>&nbsp;<span style="color: #a6e22e;font-weight: bold;line-height: 26px;">error</span></span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">return</span>&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;connet&nbsp;to&nbsp;ssh</span><br>&nbsp;&nbsp;&nbsp;&nbsp;addr&nbsp;=&nbsp;fmt.Sprintf(<span style="color: #a6e22e;line-height: 26px;">"%s:%d"</span>,&nbsp;host,&nbsp;port)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">if</span>&nbsp;client,&nbsp;err&nbsp;=&nbsp;ssh.Dial(<span style="color: #a6e22e;line-height: 26px;">"tcp"</span>,&nbsp;addr,&nbsp;clientConfig);&nbsp;err&nbsp;!=&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">return</span>&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span>,&nbsp;err<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;create&nbsp;session</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">if</span>&nbsp;session,&nbsp;err&nbsp;=&nbsp;client.NewSession();&nbsp;err&nbsp;!=&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">return</span>&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span>,&nbsp;err<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;modes&nbsp;:=&nbsp;ssh.TerminalModes{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssh.ECHO:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="line-height: 26px;">0</span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;disable&nbsp;echoing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssh.TTY_OP_ISPEED:&nbsp;<span style="line-height: 26px;">14400</span>,&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;input&nbsp;speed&nbsp;=&nbsp;14.4kbaud</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssh.TTY_OP_OSPEED:&nbsp;<span style="line-height: 26px;">14400</span>,&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;output&nbsp;speed&nbsp;=&nbsp;14.4kbaud</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">if</span>&nbsp;err&nbsp;:=&nbsp;session.RequestPty(<span style="color: #a6e22e;line-height: 26px;">"xterm"</span>,&nbsp;<span style="line-height: 26px;">80</span>,&nbsp;<span style="line-height: 26px;">40</span>,&nbsp;modes);&nbsp;err&nbsp;!=&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">return</span>&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span>,&nbsp;err<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">return</span>&nbsp;session,&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span><br>}<br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">ssh.AuthMethod</code> 里存放了 ssh 的认证方式。使用密码认证的话，就用 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">ssh.Password()</code>来加载密码。使用密钥认证的话，就用 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">ssh.ParsePrivateKey()</code> 或 &nbsp;<code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">ssh.ParsePrivateKeyWithPassphrase()</code> &nbsp;读取密钥，然后通过 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">ssh.PublicKeys()</code> 加载进去。</p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">ssh.config</code> 这个 struct 存了 ssh 的配置参数，他有以下几个配置选项，以下引用自 GoDoc 。</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;"><span style="color: #f92672;font-weight: bold;line-height: 26px;">type</span>&nbsp;Config&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">struct</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;Rand&nbsp;provides&nbsp;the&nbsp;source&nbsp;of&nbsp;entropy&nbsp;for&nbsp;cryptographic</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;primitives.&nbsp;If&nbsp;Rand&nbsp;is&nbsp;nil,&nbsp;the&nbsp;cryptographic&nbsp;random&nbsp;reader</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;in&nbsp;package&nbsp;crypto/rand&nbsp;will&nbsp;be&nbsp;used.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;加密时用的种子。默认就好</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Rand&nbsp;io.Reader<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;The&nbsp;maximum&nbsp;number&nbsp;of&nbsp;bytes&nbsp;sent&nbsp;or&nbsp;received&nbsp;after&nbsp;which&nbsp;a</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;new&nbsp;key&nbsp;is&nbsp;negotiated.&nbsp;It&nbsp;must&nbsp;be&nbsp;at&nbsp;least&nbsp;256.&nbsp;If</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;unspecified,&nbsp;a&nbsp;size&nbsp;suitable&nbsp;for&nbsp;the&nbsp;chosen&nbsp;cipher&nbsp;is&nbsp;used.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;密钥协商后的最大传输字节，默认就好</span><br>&nbsp;&nbsp;&nbsp;&nbsp;RekeyThreshold&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">uint64</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;The&nbsp;allowed&nbsp;key&nbsp;exchanges&nbsp;algorithms.&nbsp;If&nbsp;unspecified&nbsp;then&nbsp;a</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;default&nbsp;set&nbsp;of&nbsp;algorithms&nbsp;is&nbsp;used.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;KeyExchanges&nbsp;[]<span style="color: #f92672;font-weight: bold;line-height: 26px;">string</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;The&nbsp;allowed&nbsp;cipher&nbsp;algorithms.&nbsp;If&nbsp;unspecified&nbsp;then&nbsp;a&nbsp;sensible</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;default&nbsp;is&nbsp;used.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;连接所允许的加密算法</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Ciphers&nbsp;[]<span style="color: #f92672;font-weight: bold;line-height: 26px;">string</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;The&nbsp;allowed&nbsp;MAC&nbsp;algorithms.&nbsp;If&nbsp;unspecified&nbsp;then&nbsp;a&nbsp;sensible&nbsp;default</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;is&nbsp;used.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;连接允许的&nbsp;MAC&nbsp;(Message&nbsp;Authentication&nbsp;Code&nbsp;消息摘要）算法，默认就好</span><br>&nbsp;&nbsp;&nbsp;&nbsp;MACs&nbsp;[]<span style="color: #f92672;font-weight: bold;line-height: 26px;">string</span><br>}<br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">基本上默认的就好啦。但是 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">Ciphers</code> 需要修改下，默认配置下 Go 的 SSH 包提供的 Ciphers 包含以下加密方式</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;"><span style="color: #f92672;font-weight: bold;line-height: 26px;">aes128-ctr</span>&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">aes192-ctr</span>&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">aes256-ctr</span>&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">aes128-gcm</span><span style="color: #f92672;font-weight: bold;line-height: 26px;">@openssh</span>.com&nbsp;arcfour256&nbsp;arcfour128<br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">连 linux 通常没有问题，但是很多交换机其实默认只提供 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">aes128-cbc 3des-cbc aes192-cbc aes256-cbc</code> 这些。因此我们还是加全一点比较好。</p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">这里有两个地方要提一下</p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;color: rgb(128, 19, 50);" class="list-paddingleft-2"><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">在 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">clientConfig</code> 里有这么一段</section></li></ol><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;">HostKeyCallback:&nbsp;<span style="line-height: 26px;"><span style="color: #f92672;font-weight: bold;line-height: 26px;">func</span><span style="line-height: 26px;">(hostname&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">string</span>,&nbsp;remote&nbsp;net.Addr,&nbsp;key&nbsp;ssh.PublicKey)</span>&nbsp;<span style="color: #a6e22e;font-weight: bold;line-height: 26px;">error</span></span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">return</span>&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span><br>},<br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">这是因为默认密钥不受信任时，Go 的 ssh 包会在 HostKeyCallback 里把连接干掉（1.8 之后加的应该）。但是我们使用用户名密码连接的时候，这个太正常了不是么，所以让他 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">return nil</code> 就好了。</p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;color: rgb(128, 19, 50);" class="list-paddingleft-2"><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);">在 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">NewSession()</code> 后，我们定义了 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">modes</code> 和 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">RequestPty</code>。这是因为为之后使用 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">session.Shell()</code> 模拟终端时，所建立的终端参数。如果不配的话，默认值可能导致在某些终端上执行失败。例如一些 H3C 的交换机，连接建立后默认推出来的 Copyright 可能会导致 ssh 连接异常，然后超时或者直接断掉。例如这样：</section></li></ol><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;">******************************************************************************<br>*&nbsp;<span style="color: #a6e22e;font-weight: bold;line-height: 26px;">Copyright</span>&nbsp;(<span style="color: #a6e22e;line-height: 26px;">c</span>)&nbsp;<span style="line-height: 26px;">2004</span>-<span style="line-height: 26px;">2016</span>&nbsp;<span style="color: #a6e22e;font-weight: bold;line-height: 26px;">Hangzhou</span>&nbsp;<span style="color: #a6e22e;font-weight: bold;line-height: 26px;">H3C</span>&nbsp;<span style="color: #a6e22e;font-weight: bold;line-height: 26px;">Tech</span>.&nbsp;<span style="color: #a6e22e;font-weight: bold;line-height: 26px;">Co</span>.,&nbsp;<span style="color: #a6e22e;font-weight: bold;line-height: 26px;">Ltd</span>.&nbsp;<span style="color: #a6e22e;font-weight: bold;line-height: 26px;">All</span>&nbsp;rights&nbsp;reserved.&nbsp;&nbsp;*<br>*&nbsp;<span style="color: #a6e22e;font-weight: bold;line-height: 26px;">Without</span>&nbsp;the&nbsp;owner's&nbsp;prior&nbsp;written&nbsp;consent,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>*&nbsp;no&nbsp;decompiling&nbsp;or&nbsp;<span style="color: #a6e22e;line-height: 26px;">reverse</span>-engineering&nbsp;shall&nbsp;be&nbsp;allowed.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>******************************************************************************<br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">配置的参数照搬 GoDoc 上的示例就好了：</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;"><span style="color: #75715e;line-height: 26px;">//&nbsp;Set&nbsp;up&nbsp;terminal&nbsp;modes</span><br>modes&nbsp;:=&nbsp;ssh.TerminalModes{<br>&nbsp;&nbsp;&nbsp;&nbsp;ssh.ECHO:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="line-height: 26px;">0</span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;disable&nbsp;echoing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;ssh.TTY_OP_ISPEED:&nbsp;<span style="line-height: 26px;">14400</span>,&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;input&nbsp;speed&nbsp;=&nbsp;14.4kbaud</span><br>&nbsp;&nbsp;&nbsp;&nbsp;ssh.TTY_OP_OSPEED:&nbsp;<span style="line-height: 26px;">14400</span>,&nbsp;<span style="color: #75715e;line-height: 26px;">//&nbsp;output&nbsp;speed&nbsp;=&nbsp;14.4kbaud</span><br>}<br><span style="color: #75715e;line-height: 26px;">//&nbsp;Request&nbsp;pseudo&nbsp;terminal</span><br><span style="color: #f92672;font-weight: bold;line-height: 26px;">if</span>&nbsp;err&nbsp;:=&nbsp;session.RequestPty(<span style="color: #a6e22e;line-height: 26px;">"xterm"</span>,&nbsp;<span style="line-height: 26px;">40</span>,&nbsp;<span style="line-height: 26px;">80</span>,&nbsp;modes);&nbsp;err&nbsp;!=&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;log.Fatal(<span style="color: #a6e22e;line-height: 26px;">"request&nbsp;for&nbsp;pseudo&nbsp;terminal&nbsp;failed:&nbsp;"</span>,&nbsp;err)<br>}<br></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="display: none;"></span><span style="font-size: 16px;color: #6b1029;">执行命令</span><span style="display: none;"></span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">建立起 session 后，执行命令就很简单了，用 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">session.Run()</code> 就可以执行我们的命令，结果则返回到 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">session.Studout</code> 里。我们跑个简单的测试。</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;"><span style="color: #f92672;font-weight: bold;line-height: 26px;">const</span>&nbsp;(<br>&nbsp;&nbsp;&nbsp;&nbsp;username&nbsp;=&nbsp;<span style="color: #a6e22e;line-height: 26px;">"admin"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;password&nbsp;=&nbsp;<span style="color: #a6e22e;line-height: 26px;">"password"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;ip&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;<span style="color: #a6e22e;line-height: 26px;">"192.168.15.101"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;<span style="line-height: 26px;">22</span><br>&nbsp;&nbsp;&nbsp;&nbsp;cmd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;<span style="color: #a6e22e;line-height: 26px;">"show&nbsp;clock"</span><br>)<br><br><span style="line-height: 26px;"><span style="color: #f92672;font-weight: bold;line-height: 26px;">func</span>&nbsp;<span style="color: #a6e22e;font-weight: bold;line-height: 26px;">Test_SSH_run</span><span style="line-height: 26px;">(t&nbsp;*testing.T)</span></span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;ciphers&nbsp;:=&nbsp;[]<span style="color: #f92672;font-weight: bold;line-height: 26px;">string</span>{}<br>&nbsp;&nbsp;&nbsp;&nbsp;session,&nbsp;err&nbsp;:=&nbsp;connect(username,&nbsp;password,&nbsp;ip,&nbsp;port,&nbsp;ciphers)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">if</span>&nbsp;err&nbsp;!=&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.Error(err)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">return</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">defer</span>&nbsp;session.Close()<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">var</span>&nbsp;stdoutBuf&nbsp;bytes.Buffer<br>&nbsp;&nbsp;&nbsp;&nbsp;session.Stdout&nbsp;=&nbsp;&amp;stdoutBuf<br>&nbsp;&nbsp;&nbsp;&nbsp;session.Run(cmd)<br>&nbsp;&nbsp;&nbsp;&nbsp;t.Log(session.Stdout)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">return</span><br>}<br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">目标是一台交换机，测试一下</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;">===&nbsp;RUN&nbsp;&nbsp;&nbsp;Test_SSH_run<br>---&nbsp;PASS:&nbsp;Test_SSH_run&nbsp;(<span style="line-height: 26px;">0.69</span>s)<br>&nbsp;&nbsp;&nbsp;&nbsp;ssh_test.<span style="color: #f92672;font-weight: bold;line-height: 26px;">go</span>:<span style="line-height: 26px;">30</span>:&nbsp;<span style="line-height: 26px;">07</span>:<span style="line-height: 26px;">55</span>:<span style="line-height: 26px;">52.598</span>&nbsp;UTC&nbsp;Wed&nbsp;Jan&nbsp;<span style="line-height: 26px;">17</span>&nbsp;<span style="line-height: 26px;">2018</span><br>PASS<br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">可以看到 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">show clock</code> 的命令已经成功执行了，并返回了结果。</p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">session.Run()</code> 仅限定执行单条命令，要执行若干命令组合就需要用到 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">session.Shell()</code> 了。意思很明确，就是模拟一个终端去一条一条执行命令，并返回结果。就像我们用 Shell 一样，我们把整过程打印出来输出就好了。从 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">session.StdinPipe()</code> 逐个输入命令，从<code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">session.Stdout</code> 和 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">session.Stderr</code> 获取 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">Shell</code> 上的输出。一样来做个测试。</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;"><span style="color: #f92672;font-weight: bold;line-height: 26px;">const</span>&nbsp;(<br>&nbsp;&nbsp;&nbsp;&nbsp;username&nbsp;=&nbsp;<span style="color: #a6e22e;line-height: 26px;">"admin"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;password&nbsp;=&nbsp;<span style="color: #a6e22e;line-height: 26px;">"password"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;ip&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;<span style="color: #a6e22e;line-height: 26px;">"192.168.15.101"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;<span style="line-height: 26px;">22</span><br>&nbsp;&nbsp;&nbsp;&nbsp;cmds&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;<span style="color: #a6e22e;line-height: 26px;">"show&nbsp;clock;show&nbsp;env&nbsp;power;exit"</span><br>)<br><span style="line-height: 26px;"><span style="color: #f92672;font-weight: bold;line-height: 26px;">func</span>&nbsp;<span style="color: #a6e22e;font-weight: bold;line-height: 26px;">Test_SSH</span><span style="line-height: 26px;">(t&nbsp;*testing.T)</span></span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">var</span>&nbsp;cipherList&nbsp;[]<span style="color: #f92672;font-weight: bold;line-height: 26px;">string</span><br>&nbsp;&nbsp;&nbsp;&nbsp;session,&nbsp;err&nbsp;:=&nbsp;connect(username,&nbsp;password,&nbsp;ip,&nbsp;key,&nbsp;port,&nbsp;cipherList)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">if</span>&nbsp;err&nbsp;!=&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.Error(err)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">return</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">defer</span>&nbsp;session.Close()<br><br>&nbsp;&nbsp;&nbsp;&nbsp;cmdlist&nbsp;:=&nbsp;strings.Split(cmd,&nbsp;<span style="color: #a6e22e;line-height: 26px;">";"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;stdinBuf,&nbsp;err&nbsp;:=&nbsp;session.StdinPipe()<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">if</span>&nbsp;err&nbsp;!=&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.Error(err)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">return</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">var</span>&nbsp;outbt,&nbsp;errbt&nbsp;bytes.Buffer<br>&nbsp;&nbsp;&nbsp;&nbsp;session.Stdout&nbsp;=&nbsp;&amp;outbt<br><br>&nbsp;&nbsp;&nbsp;&nbsp;session.Stderr&nbsp;=&nbsp;&amp;errbt<br>&nbsp;&nbsp;&nbsp;&nbsp;err&nbsp;=&nbsp;session.Shell()<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">if</span>&nbsp;err&nbsp;!=&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">nil</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.Error(err)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">return</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">for</span>&nbsp;_,&nbsp;c&nbsp;:=&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">range</span>&nbsp;cmdlist&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;=&nbsp;c&nbsp;+&nbsp;<span style="color: #a6e22e;line-height: 26px;">"\"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stdinBuf.Write([]<span style="color: #f92672;font-weight: bold;line-height: 26px;">byte</span>(c))<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;session.Wait()<br>&nbsp;&nbsp;&nbsp;&nbsp;t.Log((outbt.String()&nbsp;+&nbsp;errbt.String()))<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">return</span><br>}<br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">还是那台交换机，测试一下</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;">===&nbsp;RUN&nbsp;&nbsp;&nbsp;Test_SSH<br>---&nbsp;PASS:&nbsp;Test_SSH&nbsp;(0.69s)<br>&nbsp;&nbsp;&nbsp;&nbsp;ssh_test.go:51:&nbsp;sw-1<span style="color: #75715e;line-height: 26px;">#show&nbsp;clock</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;07:59:52.598&nbsp;UTC&nbsp;Wed&nbsp;Jan&nbsp;17&nbsp;2018<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sw-1<span style="color: #75715e;line-height: 26px;">#show&nbsp;env&nbsp;power</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SW&nbsp;&nbsp;PID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial<span style="color: #75715e;line-height: 26px;">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sys&nbsp;Pwr&nbsp;&nbsp;PoE&nbsp;Pwr&nbsp;&nbsp;Watts</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;&nbsp;------------------&nbsp;&nbsp;----------&nbsp;&nbsp;---------------&nbsp;&nbsp;-------&nbsp;&nbsp;-------&nbsp;&nbsp;-----<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;Built-in&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Good<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sw-1<span style="color: #75715e;line-height: 26px;">#exit</span><br>PASS<br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">可以看到，两个命令都得到执行了，并在执行完 exit 后退出连接。</p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">比较一下和 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">session.Run()</code> 的区别，可以发现在 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">session.Shell()</code> 模式下，输出的内容包含了主机的名字，输入的命令等等。因为这是 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">tty</code> 执行的结果嘛。如果我们只需要执行命令倒也无所谓，但是如果我们还需要从执行命令的结果中读取一些信息，这些内容就显得有些臃肿了。比如我们在一台 ubuntu 上跑一下看看</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;">===&nbsp;RUN&nbsp;&nbsp;&nbsp;Test_SSH<br>---&nbsp;PASS:&nbsp;Test_SSH&nbsp;(<span style="line-height: 26px;">0.98</span>s)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssh_test.go:<span style="line-height: 26px;">50</span>:&nbsp;Welcome&nbsp;to&nbsp;Ubuntu&nbsp;<span style="line-height: 26px;">16.04</span><span style="line-height: 26px;">.3</span>&nbsp;LTS&nbsp;(GNU/Linux&nbsp;<span style="line-height: 26px;">4.4</span><span style="line-height: 26px;">.0</span>-<span style="line-height: 26px;">98</span>-generic&nbsp;x86_64)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Documentation:&nbsp;&nbsp;https:<span style="color: #75715e;line-height: 26px;">//help.ubuntu.com</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Management:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https:<span style="color: #75715e;line-height: 26px;">//landscape.canonical.com</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Support:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https:<span style="color: #75715e;line-height: 26px;">//ubuntu.com/advantage</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System&nbsp;information&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">as</span>&nbsp;of&nbsp;Thu&nbsp;Jan&nbsp;<span style="line-height: 26px;">18</span>&nbsp;<span style="line-height: 26px;">16</span>:<span style="line-height: 26px;">34</span>:<span style="line-height: 26px;">56</span>&nbsp;CST&nbsp;<span style="line-height: 26px;">2018</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System&nbsp;load:&nbsp;&nbsp;<span style="line-height: 26px;">0.0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Processes:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="line-height: 26px;">335</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Usage&nbsp;of&nbsp;/:&nbsp;&nbsp;&nbsp;<span style="line-height: 26px;">10.0</span>%&nbsp;of&nbsp;<span style="line-height: 26px;">90.18</span>GB&nbsp;&nbsp;&nbsp;Users&nbsp;logged&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">in</span>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="line-height: 26px;">0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Memory&nbsp;usage:&nbsp;<span style="line-height: 26px;">2</span>%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IP&nbsp;address&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">for</span>&nbsp;eth0:&nbsp;&nbsp;&nbsp;&nbsp;<span style="line-height: 26px;">192.168</span><span style="line-height: 26px;">.80</span><span style="line-height: 26px;">.131</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Swap&nbsp;usage:&nbsp;&nbsp;&nbsp;<span style="line-height: 26px;">0</span>%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IP&nbsp;address&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">for</span>&nbsp;docker0:&nbsp;<span style="line-height: 26px;">172.17</span><span style="line-height: 26px;">.0</span><span style="line-height: 26px;">.1</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Graph&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">this</span>&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">data</span>&nbsp;and&nbsp;manage&nbsp;<span style="color: #f92672;font-weight: bold;line-height: 26px;">this</span>&nbsp;system&nbsp;at:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https:<span style="color: #75715e;line-height: 26px;">//landscape.canonical.com/</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="line-height: 26px;">16</span>&nbsp;个可升级软件包。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="line-height: 26px;">16</span>&nbsp;个安全更新。<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New&nbsp;release&nbsp;<span style="color: #a6e22e;line-height: 26px;">'17.10'</span>&nbsp;available.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run&nbsp;<span style="color: #a6e22e;line-height: 26px;">'do-release-upgrade'</span>&nbsp;to&nbsp;upgrade&nbsp;to&nbsp;it.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;have&nbsp;new&nbsp;mail.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Last&nbsp;login:&nbsp;Thu&nbsp;Jan&nbsp;<span style="line-height: 26px;">18</span>&nbsp;<span style="line-height: 26px;">16</span>:<span style="line-height: 26px;">31</span>:<span style="line-height: 26px;">41</span>&nbsp;<span style="line-height: 26px;">2018</span>&nbsp;from&nbsp;<span style="line-height: 26px;">192.168</span><span style="line-height: 26px;">.95</span><span style="line-height: 26px;">.104</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #bf79db;line-height: 26px;"><a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="e1938e8e95a1">[email&#160;protected]</a></span>ubuntu-docker-node3:~#&nbsp;<span style="color: #bf79db;line-height: 26px;"><a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="43312c2c3703">[email&#160;protected]</a></span>ubuntu-docker-node3:/opt#&nbsp;/opt<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #bf79db;line-height: 26px;"><a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="6b1904041f2b">[email&#160;protected]</a></span>ubuntu-docker-node3:/opt#&nbsp;注销<br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">最起码，上面那一堆 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">System information</code> 就用不着嘛。交换机是没有办法，Linux 上能不能通过一条命令，也就是想办法 session.Run() 来执行命令组合呢？</p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">答案是可以的，把命令通过 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">&amp;&amp;</code> 连接起来就好了嘛。LInux 的 Shell 会帮我们拆开来分别运行的，比如上面的这个命令我们就可以合并成一条命令 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">cd /opt&amp;&amp;pwd&amp;&amp;exit</code></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;">===&nbsp;RUN&nbsp;&nbsp;&nbsp;Test_SSH_run<br>---&nbsp;PASS:&nbsp;Test_SSH_run&nbsp;(<span style="line-height: 26px;">0.91</span>s)<br>&nbsp;&nbsp;&nbsp;&nbsp;ssh_test.<span style="color: #f92672;font-weight: bold;line-height: 26px;">go</span>:<span style="line-height: 26px;">76</span>:&nbsp;/opt<br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">立马就简洁了对不对？</p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="display: none;"></span><span style="font-size: 16px;color: #6b1029;">轮子</span><span style="display: none;"></span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">ssh 执行命令这样就差不多了。要变成一个可以用 ssh 批量操作工具，我们还要给他加上并发执行，并发限制，超时控制，输入参数解析，输出格式等等</p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">这里就不展开了，最终这个造出来的轮子长这样：https://github.com/shanghai-edu/multissh</p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">可以直接命令行来执行，通过 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">;</code> 号或者 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">,</code> 号作为命令和主机的分隔符。</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;">#&nbsp;./multissh&nbsp;-cmds&nbsp;<span style="color: #a6e22e;line-height: 26px;">"show&nbsp;clock"</span>&nbsp;-hosts&nbsp;<span style="color: #a6e22e;line-height: 26px;">"192.168.31.21;192.168.15.102"</span>&nbsp;-u&nbsp;admin&nbsp;-p&nbsp;password<br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">也可以通过文本来存放主机组和命令组，通过换行符分隔。</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;"><span style="color: #75715e;line-height: 26px;">#&nbsp;./multissh&nbsp;-cmdfile&nbsp;cmd1.txt.example&nbsp;-hostfile&nbsp;host.txt.example&nbsp;-u&nbsp;admin&nbsp;-p&nbsp;password</span><br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">特别的，如果输入的是 IP （-ips 或 -ipfile），那么允许 IP 地址段方式的输入，例如 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">192.168.15.101-192.168.15.110</code> 。（还记得 swcollector 么，类似的实现方式）</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;">#&nbsp;./multissh&nbsp;-cmds&nbsp;<span style="color: #a6e22e;line-height: 26px;">"show&nbsp;clock"</span>&nbsp;-ips&nbsp;<span style="color: #a6e22e;line-height: 26px;">"192.168.15.101-192.168.15.110"</span>&nbsp;-u&nbsp;admin&nbsp;-p&nbsp;password<br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">支持使用 ssh 密钥认证，此时如果输入 password ，则为作为 key 的密码</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;">#&nbsp;./multissh&nbsp;-hosts&nbsp;<span style="color: #a6e22e;line-height: 26px;">"192.168.80.131"</span>&nbsp;-cmds&nbsp;<span style="color: #a6e22e;line-height: 26px;">"date;cd&nbsp;/opt;ls"</span>&nbsp;-u&nbsp;root&nbsp;-k&nbsp;<span style="color: #a6e22e;line-height: 26px;">"server.key"</span><br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">对于 linux ，支持 linuxMode 模式，也就是将命令组合通过 <code style="font-size: 14px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;overflow-wrap: break-word;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;color: rgb(233, 105, 0);background: rgb(248, 248, 248);">&amp;&amp;</code> 连接后，使用 session.Run() 运行。</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;">#&nbsp;./multissh&nbsp;-hosts&nbsp;<span style="color: #a6e22e;line-height: 26px;">"192.168.80.131"</span>&nbsp;-cmds&nbsp;<span style="color: #a6e22e;line-height: 26px;">"date;cd&nbsp;/opt;ls"</span>&nbsp;-u&nbsp;root&nbsp;-k&nbsp;<span style="color: #a6e22e;line-height: 26px;">"server.key"</span>&nbsp;-l<br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">也可以为每个主机定义不同的配置参数，以 json 格式加载配置。</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;"><span style="color: #75715e;line-height: 26px;">#&nbsp;./multissh&nbsp;-c&nbsp;ssh.json.example</span><br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">输出可以打成 json 格式，方便程序处理。</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;"><span style="color: #75715e;line-height: 26px;">#&nbsp;./multissh&nbsp;-c&nbsp;ssh.json.example&nbsp;-j</span><br></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;">也可以把输出结果存到以主机名命名的文本中，比如用来做配置备份</p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;background: #272822;color: #ddd;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius: 0px;font-size: 12px;-webkit-overflow-scrolling: touch;"><span style="color: #75715e;line-height: 26px;">#&nbsp;./multissh&nbsp;-c&nbsp;ssh.json.example&nbsp;-outTxt</span></code></pre></section><p style="white-space: normal;text-align: left;"><br></p><blockquote style="white-space: normal;caret-color: rgb(0, 0, 0);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;"><p><span style="font-size: 14px;">转自：freedomkk_qfeng</span></p><p>jianshu.com/p/7d315f8551ad</p></blockquote><p style="white-space: normal;text-align: center;"><span style="font-size: 15px;color: rgb(136, 136, 136);"></span></p><p style="white-space: normal;max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;color: rgb(178, 178, 178);box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;- EOF -</span></p><section xmlns="http://www.w3.org/1999/xhtml" style="white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section donone="shifuMouseDownCard('shifu_c_029')" label="Copyright Reserved by PLAYHUDONG." style="margin-top: 1em;margin-bottom: 1em;max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section xmlns="http://www.w3.org/1999/xhtml" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section donone="shifuMouseDownCard('shifu_c_029')" label="Copyright Reserved by PLAYHUDONG." style="margin-top: 1em;margin-bottom: 1em;max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section style="margin-left: 1em;max-width: 100%;line-height: 1.4;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding: 0.2em 0.5em;max-width: 100%;font-family: inherit;font-weight: inherit;text-decoration: inherit;border-radius: 0.3em;color: white;text-align: center;background-color: rgb(95, 170, 255);font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">推荐阅读（点击标题可打开）</span></section><section style="margin-top: -0.7em;max-width: 100%;border-width: 1px;border-style: solid;border-color: rgb(95, 170, 255);border-radius: 0.4em;font-size: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section style="padding: 1.4em 1em 1em;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section style="max-width: 100%;font-size: 1em;font-family: inherit;font-weight: inherit;text-align: inherit;text-decoration: inherit;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;text-decoration: underline;font-size: 13px;box-sizing: border-box !important;overflow-wrap: break-word !important;">1、<a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzAwNjMxMTgwNw==&amp;mid=2247488761&amp;idx=1&amp;sn=146156885fcb2591095ec9250ddbbca3&amp;chksm=9b0e0ee9ac7987ff4e54bc780bd24c12016da8de47f1bf4144891ac7b34600eb2ec33f832560&amp;scene=21#wechat_redirect');" data-itemshowtype="0" tab="innerlink" data-linktype="2">K8S 节点不可用时快速迁移 Pods</a></span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;text-decoration: underline;font-size: 13px;box-sizing: border-box !important;overflow-wrap: break-word !important;">2、<a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzAwNjMxMTgwNw==&amp;mid=2247488744&amp;idx=1&amp;sn=71a090dfa48be3ed28f72c30b860ab49&amp;chksm=9b0e0ef8ac7987ee4517f85462d7be98a68a116d557022d9dc2b394c36056a7d74f5f391be8d&amp;scene=21#wechat_redirect');" data-itemshowtype="0" tab="innerlink" data-linktype="2">k8s 为什么成了大厂标配？</a></span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;text-decoration: underline;font-size: 13px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="letter-spacing: 0.544px;"><span style="letter-spacing: 0.544px;">3、<a target="_blank" href="javascript:window.open('https://mp.weixin.qq.com/s?__biz=MzAwNjMxMTgwNw==&amp;mid=2247488738&amp;idx=1&amp;sn=5cccab2d8547180e1bb82b5822ce2352&amp;chksm=9b0e0ef2ac7987e4ec83f97f3fe01b7165a7cab6c760e0a62e660b24933195c7e80a62685131&amp;scene=21#wechat_redirect');" data-itemshowtype="11" tab="innerlink" data-linktype="2">Mutex和上厕所居然有这么多异曲同工之妙</a></span></span></span></p></section></section></section></section></section></section></section><p style="white-space: normal;text-align: center;"><br></p><p style="white-space: normal;text-align: center;"><strong style="font-size: 19px;">Go 开发大全</strong><br></p><p style="white-space: normal;"><span style="font-size: 14px;">参与维护一个非常全面的Go开源技术资源库。日常分享 Go, 云原生、k8s、Docker和微服务方面的技术文章和行业动态。</span></p><section style="white-space: normal;box-sizing: border-box;font-size: 16px;"><section powered-by="xiumi.us" style="margin-top: 4px;margin-bottom: 4px;box-sizing: border-box;"><section style="padding: 20px;display: inline-block;width: 577.778px;vertical-align: top;background-color: rgb(243, 248, 255);box-sizing: border-box;"><section powered-by="xiumi.us" style="box-sizing: border-box;"><section style="display: flex;flex-flow: row nowrap;box-sizing: border-box;"><section style="display: inline-block;vertical-align: bottom;width: auto;flex: 40 40 0%;align-self: flex-end;height: auto;box-shadow: rgb(0, 0, 0) 0px 0px 0px;box-sizing: border-box;"><section powered-by="xiumi.us" style="text-align: center;box-sizing: border-box;"><section style="max-width: 100%;vertical-align: middle;display: inline-block;line-height: 0;box-shadow: rgb(227, 239, 255) 0px 5px 0px;box-sizing: border-box;"><img data-cropselx1="0" data-cropselx2="173" data-cropsely1="0" data-cropsely2="173" data-ratio="1" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/IgylNib7ZE2JRk01gAo7KnLeibF6USDCJbOC5wdvxhZ4vdDcIvaf8j25oy0GANp0U04JWlpKwD0c0OjEx1gIibKbw/640?wx_fmt=jpeg" data-type="jpeg" data-w="258" style="vertical-align: middle; box-sizing: border-box; width: 89px !important; height: 89px !important;" _width="141px" class="img_loading" src="https://www.muker.cc/index/index/wx?img=https://mmbiz.qpic.cn/mmbiz_jpg/IgylNib7ZE2JRk01gAo7KnLeibF6USDCJbOC5wdvxhZ4vdDcIvaf8j25oy0GANp0U04JWlpKwD0c0OjEx1gIibKbw/640?wx_fmt=jpeg" crossorigin="anonymous" alt="图片"></section></section></section><section style="margin-left: 20px;display: inline-block;vertical-align: bottom;width: auto;flex: 80 80 0%;height: auto;align-self: flex-end;box-sizing: border-box;"><section powered-by="xiumi.us" style="box-sizing: border-box;"><section style="margin-top: 20px;display: flex;flex-flow: row nowrap;box-sizing: border-box;"><section style="padding-top: 2px;padding-bottom: 2px;padding-left: 2px;display: inline-block;width: auto;vertical-align: top;background-color: rgb(95, 156, 239);min-width: 10%;max-width: 100%;flex: 0 0 auto;height: auto;align-self: flex-start;z-index: 2;box-sizing: border-box;"><section powered-by="xiumi.us" style="font-size: 17px;text-align: right;letter-spacing: 1px;color: rgb(255, 255, 255);line-height: 1;box-sizing: border-box;"><p style="text-align: center;box-sizing: border-box;"><strong style="box-sizing: border-box;">关注后获取</strong></p></section></section><section style="display: inline-block;vertical-align: top;width: auto;flex: 100 100 0%;height: auto;align-self: flex-start;box-sizing: border-box;"><section powered-by="xiumi.us" style="margin-top: -15px;text-align: left;justify-content: flex-start;transform: translate3d(-20px, 0px, 0px);box-sizing: border-box;"><section style="display: inline-block;width: 33px;height: 33px;vertical-align: top;overflow: hidden;background-color: rgb(255, 234, 155);border-width: 0px;border-radius: 60px;border-style: none;border-color: rgb(62, 62, 62);box-sizing: border-box;"><section><svg viewbox="0 0 1 1" style="float:left;line-height:0;width:0;vertical-align:top;"></svg></section></section></section></section></section></section><section powered-by="xiumi.us" style="margin-top: 10px;box-sizing: border-box;"><section style="font-size: 14px;color: rgb(20, 20, 20);line-height: 1.8;letter-spacing: 0px;box-sizing: border-box;"><p style="box-sizing: border-box;">回复&nbsp;<span style="color: rgb(255, 76, 0);">Go</span>&nbsp;获取6万star的Go资源库</p><p style="box-sizing: border-box;"><br></p></section></section></section></section></section></section></section></section><p style="white-space: normal;max-width: 100%;min-height: 1em;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="font-size: 14px;"></span><br></p><p style="white-space: normal;max-width: 100%;min-height: 1em;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">分享、点赞和在看</span></p><p style="white-space: normal;max-width: 100%;min-height: 1em;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">支持我们分享更多好文章，谢谢！</span></p>                </div><div>来源:https://mp.weixin.qq.com/s/w5xY1HPplFP6VG7eEk82zA</div>                        
                        <!-- E 正文 -->
                    </div>

                    <!-- S 付费阅读 -->
<!-- E 付费阅读 -->


                    <!-- S 点赞 -->
<div class="article-donate">
    <a href="javascript:" class="btn btn-primary btn-like btn-lg" data-action="vote" data-type="like" data-id="249" data-tag="archives"><i class="fa fa-thumbs-up"></i> 点赞(<span>0</span>)</a>
    <a href="javascript:" class="btn btn-outline-primary btn-donate btn-lg" data-action="donate" data-id="249" data-image="/uploads/20210611/c81a0eac1c3e5de3ecee547f7d6afebb.png"><i class="fa fa-cny"></i> 打赏</a>
</div>
<!-- E 点赞 -->


                    

<!-- S 分享 -->
<div class="social-share text-center mt-2 mb-1" data-initialized="true" data-mode="prepend" data-image="https://mmbiz.qpic.cn/mmbiz_jpg/IgylNib7ZE2JRk01gAo7KnLeibF6USDCJbOC5wdvxhZ4vdDcIvaf8j25oy0GANp0U04JWlpKwD0c0OjEx1gIibKbw/640">
    <a href="javascript:;" class="social-share-icon icon-heart addbookbark" data-type="archives" data-aid="249" data-action="../../addons/cms/ajax/collection.html"></a>
    <a href="#" class="social-share-icon icon-weibo" target="_blank"></a>
    <a href="#" class="social-share-icon icon-qq" target="_blank"></a>
    <a href="#" class="social-share-icon icon-qzone" target="_blank"></a>
    <a href="#" class="social-share-icon icon-wechat"></a>
</div>

<!-- E 分享 -->


                    <div class="entry-meta">
    <ul>
        <!-- S 归档 -->
        <li>本文分类：<a href="../tech2.html">技术</a></li>
        <li>本文标签：<a href="../t/golang.html" class="tag" rel="tag">golang</a></li>
        <li>浏览次数：<span>347</span> 次浏览</li>
        <li>发布日期：2021-07-16 12:11:57</li>
        <li>本文链接：<a href=""></a></li>
        <!-- S 归档 -->
    </ul>

    <ul class="article-prevnext">
        <!-- S 上一篇下一篇 -->
                <li>
            <span>上一篇 &gt;</span>
            <a href="248.html">如何将 Numpy 加速 700 倍？用 CuPy 呀</a>
        </li>
                <li>
            <span>下一篇 &gt;</span>
            <a href="250.html">整理了 34 个 Python 自动化办公库</a>
        </li>
                <!-- E 上一篇下一篇 -->
    </ul>
</div>


                    <div class="related-article">
    <div class="row">
        <!-- S 相关文章 -->
                <div class="col-sm-3 col-xs-6">
            <a href="312.html" class="img-zoom">
                <div class="embed-responsive embed-responsive-4by3">
                    <img src="https://mmbiz.qpic.cn/mmbiz_png/Lq0XA1b7xbfhkdH8eRViasemWJnuVsSXb4bmFBhoxZM0e9U2mbgVxT1kEVQ7C1NRaeic02E8lONQQxSxNsxJOY5A/640" alt="《Go 语言高级编程》的故事" class="embed-responsive-item">
                </div>
            </a>
            <h5 class="text-center"><a href="312.html">《Go 语言高级编程》的故事</a></h5>
        </div>
                <div class="col-sm-3 col-xs-6">
            <a href="" class="img-zoom">
                <div class="embed-responsive embed-responsive-4by3">
                    <img src="https://mmbiz.qpic.cn/mmbiz_jpg/IgylNib7ZE2JRk01gAo7KnLeibF6USDCJbOC5wdvxhZ4vdDcIvaf8j25oy0GANp0U04JWlpKwD0c0OjEx1gIibKbw/640" alt="用 Go 写一个轻量级的 ssh 批量操作工具" class="embed-responsive-item">
                </div>
            </a>
            <h5 class="text-center"><a href="">用 Go 写一个轻量级的 ssh 批量操作工具</a></h5>
        </div>
                <div class="col-sm-3 col-xs-6">
            <a href="228.html" class="img-zoom">
                <div class="embed-responsive embed-responsive-4by3">
                    <img src="https://mmbiz.qpic.cn/mmbiz_png/IgylNib7ZE2JkGKlj7c9IXsP77h224sEFkBKUoKgIr7ML8bqH7YCfJ2nn3upykqGiaqcor4iagibM5OXelQYibxnNOw/640" alt="Go 中 io 包的使用方法" class="embed-responsive-item">
                </div>
            </a>
            <h5 class="text-center"><a href="228.html">Go 中 io 包的使用方法</a></h5>
        </div>
                <div class="col-sm-3 col-xs-6">
            <a href="216.html" class="img-zoom">
                <div class="embed-responsive embed-responsive-4by3">
                    <img src="https://mmbiz.qpic.cn/mmbiz_jpg/IgylNib7ZE2L0rFhBr2hLMWlVcZzM6z63EtPefHib4rKicw5UX4OlrNtueicEu2v7mnspOR1icPtqf7TxvYhEf1OFfA/640" alt="Go 语言实现简易版 netstat 命令" class="embed-responsive-item">
                </div>
            </a>
            <h5 class="text-center"><a href="216.html">Go 语言实现简易版 netstat 命令</a></h5>
        </div>
                <!-- E 相关文章 -->
    </div>
</div>


                    <div class="clearfix"></div>
                </div>
            </div>

            <div class="panel panel-default" id="comments">
                <div class="panel-heading">
                    <h3 class="panel-title">评论列表                        <small>共有 <span>0</span> 条评论</small>
                    </h3>
                </div>
                <div class="panel-body">
                                        <div id="comment-container">
    <!-- S 评论列表 -->
    <div id="commentlist">
                <div class="loadmore loadmore-line loadmore-nodata"><span class="loadmore-tips">暂无评论</span></div>
            </div>
    <!-- E 评论列表 -->

    <!-- S 评论分页 -->
    <div id="commentpager" class="text-center">
            </div>
    <!-- E 评论分页 -->

    <!-- S 发表评论 -->
    <div id="postcomment">
        <h3>发表评论 <a href="javascript:;">
            <small>取消回复</small>
        </a></h3>
        <form action="../../addons/cms/comment/post.html" method="post" id="postform">
            <input type="hidden" name="__token__" value="848a7224ef3852e119b850c39ed6d152">            <input type="hidden" name="type" value="archives">
            <input type="hidden" name="aid" value="249">
            <input type="hidden" name="pid" id="pid" value="0">
            <div class="form-group">
                <textarea name="content" class="form-control" disabled="" placeholder="请登录后再发表评论" id="commentcontent" cols="6" rows="5" tabindex="4"></textarea>
            </div>
                        <div class="form-group">
                <a href="../../index/user/login1.html" class="btn btn-primary">登录</a>
                <a href="../../index/user/register.html" class="btn btn-outline-primary">注册新账号</a>
            </div>
                    </form>
    </div>
    <!-- E 发表评论 -->
</div>

                                    </div>
            </div>

        </main>

        <aside class="col-xs-12 col-sm-4">
                        <!-- S 关于作者 -->
            <div class="panel panel-default about-author" data-id="2" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <meta itemprop="name" content="clrs">
                <meta itemprop="image" content="/uploads/20210611/1c33f3b2e46303967d5fa6e70be59f24.png">
                <meta itemprop="url" content="/u/2">
                <div class="panel-heading">
                    <h3 class="panel-title">关于作者</h3>
                </div>
                <div class="panel-body">
                    <div class="media">
                        <div class="media-left">
                            <a href="../../u/2.html">
                                <img class="media-object img-circle img-medium" style="width:64px;height:64px;" src="https://www.muker.cc/uploads/20210611/1c33f3b2e46303967d5fa6e70be59f24.png" data-holder-rendered="true">
                            </a>
                        </div>
                        <div class="media-body">
                            <h3 style="margin-top:10px;" class="media-heading">
                                <a href="../../u/2.html">clrs</a>
                            </h3>
                            这家伙很懒，什么也没写！                        </div>
                    </div>
                </div>
            </div>
            <!-- E 关于作者 -->
                        
<div class="panel panel-blockimg">
    <p><img src="https://www.muker.cc/uploads/20210616/89c87bce97dfae0c305ab5741caf5259.png"></p>
</div>

<!-- S 热门资讯 -->
<div class="panel panel-default hot-article">
    <div class="panel-heading">
        <h3 class="panel-title">推荐资讯</h3>
    </div>
    <div class="panel-body">
            </div>
</div>
<!-- E 热门资讯 -->

<div class="panel panel-blockimg">
    <p><img src="https://www.muker.cc/uploads/20210616/89c87bce97dfae0c305ab5741caf5259.png"></p>
</div>

<!-- S 热门标签 -->
<div class="panel panel-default hot-tags">
    <div class="panel-heading">
        <h3 class="panel-title">热门标签</h3>
    </div>
    <div class="panel-body">
        <div class="tags">
                        <a href="../t/驰为.html" class="tag"> <span>驰为</span></a>
                        <a href="../t/树莓派.html" class="tag"> <span>树莓派</span></a>
                        <a href="../t/pc.html" class="tag"> <span>PC</span></a>
                        <a href="../t/鸿蒙.html" class="tag"> <span>鸿蒙</span></a>
                        <a href="../t/jwt.html" class="tag"> <span>JWT</span></a>
                        <a href="../t/视频转换器.html" class="tag"> <span>视频转换器</span></a>
                        <a href="../t/.net.html" class="tag"> <span>. net</span></a>
                        <a href="../t/虚拟录音.html" class="tag"> <span>虚拟录音</span></a>
                        <a href="../t/vr.html" class="tag"> <span>VR</span></a>
                        <a href="../t/devops.html" class="tag"> <span>DevOps</span></a>
                        <a href="../t/视频制作.html" class="tag"> <span>视频制作</span></a>
                        <a href="../t/ddd.html" class="tag"> <span>DDD</span></a>
                        <a href="../t/博客写作.html" class="tag"> <span>博客写作</span></a>
                        <a href="../t/音乐播放器.html" class="tag"> <span>音乐播放器</span></a>
                        <a href="../t/.netcore.html" class="tag"> <span>. net core</span></a>
                        <a href="../t/dropbox.html" class="tag"> <span>dropbox</span></a>
                        <a href="../t/ftp工具.html" class="tag"> <span>FTP工具</span></a>
                        <a href="../t/音频录制.html" class="tag"> <span>音频录制</span></a>
                        <a href="../t/golang.html" class="tag"> <span>Golang</span></a>
                        <a href="../t/无线wifi网络管理.html" class="tag"> <span>无线WiFi网络管理</span></a>
                        <a href="../t/投资.html" class="tag"> <span>投资</span></a>
                        <a href="../t/gitlab.html" class="tag"> <span>gitlab</span></a>
                        <a href="../t/互联网.html" class="tag"> <span>互联网</span></a>
                        <a href="../t/宏基.html" class="tag"> <span>宏基</span></a>
                        <a href="../t/小米.html" class="tag"> <span> 小米</span></a>
                        <a href="../t/线程.html" class="tag"> <span> 线程</span></a>
                        <a href="../t/.net1.html" class="tag"> <span>.net</span></a>
                        <a href="../t/日志工具.html" class="tag"> <span>日志工具</span></a>
                        <a href="../t/开源.html" class="tag"> <span>开源</span></a>
                        <a href="../t/美团.html" class="tag"> <span>美团</span></a>
                    </div>
    </div>
</div>
<!-- E 热门标签 -->

<!-- S 推荐下载 -->
<div class="panel panel-default recommend-article">
    <div class="panel-heading">
        <h3 class="panel-title">推荐下载</h3>
    </div>
    <div class="panel-body">
                <div class="media media-number">
            <div class="media-left">
                <span class="num">1</span>
            </div>
            <div class="media-body">
                <a href="../app/44.html" title="Compressor 4.4.4 苹果官方出品视频解码格式转换工具">Compressor 4.4.4 苹果官方出品视频解码格式转换工具</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">2</span>
            </div>
            <div class="media-body">
                <a href="../app/47.html" title="Pikka 2.0.4 菜单栏屏幕取色器">Pikka 2.0.4 菜单栏屏幕取色器</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">3</span>
            </div>
            <div class="media-body">
                <a href="../media/49.html" title="iShowU Instant 1.2.11 实时屏幕录制软件">iShowU Instant 1.2.11 实时屏幕录制软件</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">4</span>
            </div>
            <div class="media-body">
                <a href="../media/50.html" title="VideoProc 3.2(2019013001) 视频格式转换">VideoProc 3.2(2019013001) 视频格式转换</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">5</span>
            </div>
            <div class="media-body">
                <a href="../media/51.html" title="RightFont 5.4.1(2474) 超级好用的字体管理工具">RightFont 5.4.1(2474) 超级好用的字体管理工具</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">6</span>
            </div>
            <div class="media-body">
                <a href="../media/52.html" title="SPlayerX 4.1.4 射手播放器">SPlayerX 4.1.4 射手播放器</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">7</span>
            </div>
            <div class="media-body">
                <a href="../media/54.html" title="Meta 1.9.2(2358) 音频元数据音乐标签信息编辑器">Meta 1.9.2(2358) 音频元数据音乐标签信息编辑器</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">8</span>
            </div>
            <div class="media-body">
                <a href="../media/57.html" title="Camtasia 2018.0.8(105822) 强大且易用的视频录制和剪辑软件">Camtasia 2018.0.8(105822) 强大且易用的视频录制和剪辑软件</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">9</span>
            </div>
            <div class="media-body">
                <a href="../media/60.html" title="Cinemagraph Pro 2.7.1 专业的动态图片与视频制作工具">Cinemagraph Pro 2.7.1 专业的动态图片与视频制作工具</a>
            </div>
        </div>
                <div class="media media-number">
            <div class="media-left">
                <span class="num">10</span>
            </div>
            <div class="media-body">
                <a href="../media/62.html" title="MacX Video Converter Pro 6.4.0(20181213) 视频转换器">MacX Video Converter Pro 6.4.0(20181213) 视频转换器</a>
            </div>
        </div>
            </div>
</div>
<!-- E 推荐下载 -->

<div class="panel panel-blockimg">
    <p><img src="https://www.muker.cc/uploads/20210616/89c87bce97dfae0c305ab5741caf5259.png"></p>
</div>

        </aside>
    </div>
</div>

</main>

<footer>
    <div class="container-fluid" id="footer">
        <div class="container">
            <div class="row footer-inner">
                <div class="col-md-3 col-sm-3">
                            <div class="footer-logo">
                                <a href="#"><i class="fa fa-bookmark"></i></a>
                            </div>
                            <p class="copyright"><small>© 2020-2021 穆客智能 All Rights Reserved.</small></p>
                        </div>
                        <div class="col-md-5 col-md-push-1 col-sm-5 col-sm-push-1">
                            <div class="row">
                                <div class="col-xs-4">
                                    <ul class="links">
                                        <li><a href="javascript:window.open('https://www.muker.club/cms/p/aboutus.html');">关于我们</a></li>
                                        <li><a href="#">发展历程</a></li>
                                        <li><a href="#">服务项目</a></li>
                                        <li><a href="#">团队成员</a></li>
                                    </ul>
                                </div>
                                <div class="col-xs-4">
                                    <ul class="links">
                                        <li><a href="#">新闻</a></li>
                                        <li><a href="#">资讯</a></li>
                                        <li><a href="#">推荐</a></li>
                                        <li><a href="#">博客</a></li>
                                    </ul>
                                </div>
                                <div class="col-xs-4">
                                    <ul class="links">
                                        <li><a href="#">服务</a></li>
                                        <li><a href="#">圈子</a></li>
                                        <li><a href="#">论坛</a></li>
                                        <li><a href="#">广告</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-3 col-md-push-1 col-sm-push-1">
                            <div class="footer-social">
                                <a href="#"><i class="fa fa-weibo"></i></a>
                                <a href="#"><i class="fa fa-qq"></i></a>
                                <a href="#"><i class="fa fa-wechat"></i></a>
                            </div>
                        </div>
            </div>
        </div>
    </div>
</footer>

<div id="floatbtn">
    <!-- S 浮动按钮 -->

        <a href="javascript:;">
        <i class="iconfont icon-wxapp"></i>
        <div class="floatbtn-wrapper">
            <div class="qrcode"><img src="https://www.muker.cc/uploads/20210611/f75e8bc38b426f1a8ae2604807729aca.jpg"></div>
            <p>微信小程序</p>
            <p>微信扫一扫体验</p>
        </div>
    </a>
    
    <a class="hover" href="../../index/cms.archives/post.html" target="_blank">
        <i class="iconfont icon-pencil"></i>
        <em>立即<br>投稿</em>
    </a>

    <div class="floatbtn-item floatbtn-share">
        <i class="iconfont icon-share"></i>
        <div class="floatbtn-wrapper" style="height:50px;top:0">
            <div class="social-share" data-initialized="true" data-mode="prepend">
                <a href="#" class="social-share-icon icon-weibo" target="_blank"></a>
                <a href="#" class="social-share-icon icon-qq" target="_blank"></a>
                <a href="#" class="social-share-icon icon-qzone" target="_blank"></a>
                <a href="#" class="social-share-icon icon-wechat"></a>
            </div>
        </div>
    </div>

        <a href="javascript:;">
        <i class="iconfont icon-qrcode"></i>
        <div class="floatbtn-wrapper">
            <div class="qrcode"><img src="https://www.muker.cc/uploads/20210611/f75e8bc38b426f1a8ae2604807729aca.jpg"></div>
            <p>微信公众账号</p>
            <p>微信扫一扫加关注</p>
        </div>
    </a>
        <a id="feedback" class="hover" href="#comments">
        <i class="iconfont icon-feedback"></i>
        <em>发表<br>评论</em>
    </a>
    
    <a id="back-to-top" class="hover" href="javascript:;">
        <i class="iconfont icon-backtotop"></i>
        <em>返回<br>顶部</em>
    </a>
    <!-- E 浮动按钮 -->
</div>


<script data-cfasync="false" src="https://www.muker.cc/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="text/javascript" src="https://www.muker.cc/assets/libs/jquery/dist/jquery.min.js?v=1.0.97"></script>
<script type="text/javascript" src="https://www.muker.cc/assets/libs/bootstrap/dist/js/bootstrap.min.js?v=1.0.97"></script>
<script type="text/javascript" src="https://www.muker.cc/assets/libs/fastadmin-layer/dist/layer.js?v=1.0.97"></script>
<script type="text/javascript" src="https://www.muker.cc/assets/libs/art-template/dist/template-native.js?v=1.0.97"></script>
<script type="text/javascript" src="https://www.muker.cc/assets/addons/cms/js/jquery.autocomplete.js?v=1.0.97"></script>
<script type="text/javascript" src="https://www.muker.cc/assets/addons/cms/js/swiper.min.js?v=1.0.97"></script>
<script type="text/javascript" src="https://www.muker.cc/assets/addons/cms/js/share.min.js?v=1.0.97"></script>
<script type="text/javascript" src="https://www.muker.cc/assets/addons/cms/js/cms.js?v=1.0.97"></script>
<script type="text/javascript" src="https://www.muker.cc/assets/addons/cms/js/common.js?v=1.0.97"></script>

<script type="text/javascript">(function(){window['__CF$cv$params']={r:'6c0998775b347550',m:'hYAHI31gVASrjP8_a2S8xQ2hUXHsTllARtCe9xv_9F0-1640010909-0-AT0NuoKiEoaNyd13gZl5Sn0ZLq53SXiBgdEPKMD6XKT2nGyEhaNGoVAnD+IqUX1+hayg7Csu/BXwyPc4CnhvGzk+ftAareb3wDHtLLqJs49+ElDkIO4aHKKuIK87vSA6dy5NIEWR0k1RDmuiUr6Y4Uw=',s:[0x14f99e5dd1,0x7a8cebad05],u:'/cdn-cgi/challenge-platform/h/g'}})();</script></body>
</html>
